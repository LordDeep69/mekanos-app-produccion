generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model actividades_ejecutadas {
  id_actividad_ejecutada   Int                       @id @default(autoincrement())
  id_orden_servicio        Int
  id_actividad_catalogo    Int?
  descripcion_manual       String?
  sistema                  String?                   @db.VarChar(100)
  orden_secuencia          Int?
  estado                   estado_actividad_enum?
  observaciones            String?
  ejecutada                Boolean?                  @default(true)
  fecha_ejecucion          DateTime?                 @default(now()) @db.Timestamp(6)
  ejecutada_por            Int?
  tiempo_ejecucion_minutos Int?
  requiere_evidencia       Boolean?                  @default(false)
  evidencia_capturada      Boolean?                  @default(false)
  fecha_registro           DateTime?                 @default(now()) @db.Timestamp(6)
  id_orden_equipo          Int?
  empleados                empleados?                @relation(fields: [ejecutada_por], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)
  catalogo_actividades     catalogo_actividades?     @relation(fields: [id_actividad_catalogo], references: [id_actividad_catalogo], onDelete: NoAction, onUpdate: NoAction)
  ordenes_equipos          ordenes_equipos?          @relation(fields: [id_orden_equipo], references: [id_orden_equipo], onUpdate: NoAction)
  ordenes_servicio         ordenes_servicio          @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)
  componentes_usados       componentes_usados[]
  evidencias_fotograficas  evidencias_fotograficas[]

  @@index([id_orden_servicio, orden_secuencia], map: "idx_actividades_orden_secuencia")
  @@index([ejecutada_por], map: "idx_actividades_tecnico")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model alertas_stock {
  id_alerta            Int                    @id @default(autoincrement())
  tipo_alerta          tipo_alerta_stock_enum
  nivel                nivel_alerta_enum
  id_componente        Int?
  id_lote              Int?
  mensaje              String
  estado               estado_alerta_enum     @default(PENDIENTE)
  fecha_generacion     DateTime               @default(now()) @db.Timestamp(6)
  fecha_resolucion     DateTime?              @db.Timestamp(6)
  resuelto_por         Int?
  observaciones        String?
  catalogo_componentes catalogo_componentes?  @relation(fields: [id_componente], references: [id_componente], onDelete: Cascade, onUpdate: NoAction, map: "fk_alerta_componente")
  lotes_componentes    lotes_componentes?     @relation(fields: [id_lote], references: [id_lote], onDelete: Cascade, onUpdate: NoAction, map: "fk_alerta_lote")
  usuarios             usuarios?              @relation(fields: [resuelto_por], references: [id_usuario], onUpdate: NoAction, map: "fk_alerta_resuelto_por")

  @@index([id_componente, estado], map: "idx_alerta_componente")
  @@index([id_lote, estado], map: "idx_alerta_lote")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model aprobaciones_cotizacion {
  id_aprobacion                                             Int                    @id @default(autoincrement())
  id_cotizacion                                             Int?
  id_propuesta                                              Int?
  nivel_aprobacion                                          nivel_aprobacion_enum
  razon_nivel                                               String?
  estado_aprobacion                                         String?                @default("PENDIENTE") @db.VarChar(50)
  solicitada_por                                            Int
  fecha_solicitud                                           DateTime?              @default(now()) @db.Timestamp(6)
  observaciones_solicitante                                 String?
  aprobada_por                                              Int?
  fecha_respuesta                                           DateTime?              @db.Timestamp(6)
  observaciones_aprobador                                   String?
  metadata                                                  Json?
  usuarios_aprobaciones_cotizacion_aprobada_porTousuarios   usuarios?              @relation("aprobaciones_cotizacion_aprobada_porTousuarios", fields: [aprobada_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  cotizaciones                                              cotizaciones?          @relation(fields: [id_cotizacion], references: [id_cotizacion], onDelete: Cascade, onUpdate: NoAction)
  propuestas_correctivo                                     propuestas_correctivo? @relation(fields: [id_propuesta], references: [id_propuesta], onDelete: Cascade, onUpdate: NoAction)
  usuarios_aprobaciones_cotizacion_solicitada_porTousuarios usuarios               @relation("aprobaciones_cotizacion_solicitada_porTousuarios", fields: [solicitada_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([aprobada_por, estado_aprobacion], map: "idx_aprob_aprobador")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model archivos_equipo {
  id_archivo                                        Int       @id @default(autoincrement())
  id_equipo                                         Int
  tipo_archivo                                      String    @db.VarChar(50)
  nombre_archivo                                    String    @db.VarChar(255)
  nombre_original                                   String    @db.VarChar(255)
  ruta_archivo                                      String    @db.VarChar(500)
  extension_archivo                                 String?   @db.VarChar(10)
  mime_type                                         String?   @db.VarChar(100)
  tama_o_bytes                                      BigInt?   @map("tamaÃ±o_bytes")
  titulo                                            String?   @db.VarChar(200)
  descripcion                                       String?
  es_principal                                      Boolean?  @default(false)
  es_publico                                        Boolean?  @default(false)
  categoria                                         String?   @db.VarChar(100)
  orden                                             Int?      @default(0)
  hash_archivo                                      String    @db.VarChar(64)
  metadata                                          Json?
  fecha_subida                                      DateTime? @default(now()) @db.Timestamp(6)
  subido_por                                        Int
  fecha_modificacion                                DateTime? @db.Timestamp(6)
  modificado_por                                    Int?
  activo                                            Boolean?  @default(true)
  fecha_eliminacion                                 DateTime? @db.Timestamp(6)
  eliminado_por                                     Int?
  motivo_eliminacion                                String?   @db.VarChar(500)
  usuarios_archivos_equipo_eliminado_porTousuarios  usuarios? @relation("archivos_equipo_eliminado_porTousuarios", fields: [eliminado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_archivos_eliminado_por")
  equipos                                           equipos   @relation(fields: [id_equipo], references: [id_equipo], onDelete: Cascade, onUpdate: NoAction, map: "fk_archivos_equipo")
  usuarios_archivos_equipo_modificado_porTousuarios usuarios? @relation("archivos_equipo_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_archivos_modificado_por")
  usuarios_archivos_equipo_subido_porTousuarios     usuarios  @relation("archivos_equipo_subido_porTousuarios", fields: [subido_por], references: [id_usuario], onUpdate: NoAction, map: "fk_archivos_subido_por")

  @@index([id_equipo, tipo_archivo], map: "idx_archivos_equipo_tipo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bitacoras {
  id_bitacora              Int                   @id @default(autoincrement())
  numero_bitacora          String                @unique @db.VarChar(50)
  id_cliente               Int
  mes                      Int
  anio                     Int
  fecha_generacion         DateTime              @default(now()) @db.Timestamp(6)
  generado_por             Int
  estado_bitacora          estado_bitacora_enum  @default(BORRADOR)
  id_documento_pdf         Int?
  cantidad_informes        Int                   @default(0)
  enviada_cliente_fecha    DateTime?             @db.Timestamp(6)
  metodo_envio             String?               @db.VarChar(20)
  fecha_aprobacion_cliente DateTime?             @db.Timestamp(6)
  firma_digital_cliente    String?
  observaciones            String?
  clientes                 clientes              @relation(fields: [id_cliente], references: [id_cliente], onDelete: SetNull, onUpdate: NoAction, map: "fk_bitacora_cliente")
  documentos_generados     documentos_generados? @relation(fields: [id_documento_pdf], references: [id_documento], onUpdate: NoAction, map: "fk_bitacora_documento_pdf")
  usuarios                 usuarios              @relation(fields: [generado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_bitacora_generado_por")
  bitacoras_informes       bitacoras_informes[]

  @@unique([id_cliente, mes, anio], map: "uk_bitacora_unica_cliente_periodo")
  @@index([id_cliente], map: "idx_bitacoras_cliente")
  @@index([id_cliente, anio(sort: Desc), mes(sort: Desc)], map: "idx_bitacoras_cliente_periodo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bitacoras_informes {
  id_bitacora_informe Int       @id @default(autoincrement())
  id_bitacora         Int
  id_informe          Int
  orden_bitacora      Int
  bitacoras           bitacoras @relation(fields: [id_bitacora], references: [id_bitacora], onDelete: Cascade, onUpdate: NoAction, map: "fk_bitacora_informe_bitacora")
  informes            informes  @relation(fields: [id_informe], references: [id_informe], onDelete: SetNull, onUpdate: NoAction, map: "fk_bitacora_informe_informe")

  @@unique([id_bitacora, id_informe], map: "uk_bitacora_informe_unico")
  @@unique([id_bitacora, orden_bitacora], map: "uk_bitacora_orden_unico")
  @@index([id_bitacora], map: "idx_bitacoras_informes_bitacora")
  @@index([id_informe], map: "idx_bitacoras_informes_informe")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model catalogo_actividades {
  id_actividad_catalogo                                  Int                        @id @default(autoincrement())
  codigo_actividad                                       String                     @unique @db.VarChar(50)
  descripcion_actividad                                  String
  id_tipo_servicio                                       Int
  id_sistema                                             Int?
  tipo_actividad                                         tipo_actividad_enum
  orden_ejecucion                                        Int
  es_obligatoria                                         Boolean?                   @default(true)
  tiempo_estimado_minutos                                Int?
  id_parametro_medicion                                  Int?
  id_tipo_componente                                     Int?
  instrucciones                                          String?
  precauciones                                           String?
  activo                                                 Boolean?                   @default(true)
  observaciones                                          String?
  creado_por                                             Int?
  fecha_creacion                                         DateTime?                  @default(now()) @db.Timestamp(6)
  modificado_por                                         Int?
  fecha_modificacion                                     DateTime?                  @db.Timestamp(6)
  actividades_ejecutadas                                 actividades_ejecutadas[]
  usuarios_catalogo_actividades_creado_porTousuarios     usuarios?                  @relation("catalogo_actividades_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  parametros_medicion                                    parametros_medicion?       @relation(fields: [id_parametro_medicion], references: [id_parametro_medicion], onDelete: NoAction, onUpdate: NoAction)
  catalogo_sistemas                                      catalogo_sistemas?         @relation(fields: [id_sistema], references: [id_sistema], onDelete: NoAction, onUpdate: NoAction)
  tipos_componente                                       tipos_componente?          @relation(fields: [id_tipo_componente], references: [id_tipo_componente], onDelete: NoAction, onUpdate: NoAction)
  tipos_servicio                                         tipos_servicio             @relation(fields: [id_tipo_servicio], references: [id_tipo_servicio], onDelete: NoAction, onUpdate: NoAction)
  usuarios_catalogo_actividades_modificado_porTousuarios usuarios?                  @relation("catalogo_actividades_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  ordenes_actividades_plan                               ordenes_actividades_plan[]

  @@index([tipo_actividad], map: "idx_actividades_tipo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model catalogo_componentes {
  id_componente                                          Int                             @id @default(autoincrement())
  id_tipo_componente                                     Int
  codigo_interno                                         String?                         @unique @db.VarChar(50)
  referencia_fabricante                                  String                          @db.VarChar(100)
  marca                                                  String?                         @db.VarChar(100)
  descripcion_corta                                      String?                         @db.VarChar(200)
  descripcion_detallada                                  String?
  especificaciones_tecnicas                              Json?
  tipo_comercial                                         tipo_componente_comercial_enum? @default(ORIGINAL)
  precio_compra                                          Decimal?                        @db.Decimal(12, 2)
  precio_venta                                           Decimal?                        @db.Decimal(12, 2)
  ventana_costo_meses                                    Int?                            @default(3)
  moneda                                                 String?                         @default("COP") @db.VarChar(10)
  margen_utilidad_porcentaje                             Decimal?                        @default(dbgenerated("\nCASE\n    WHEN ((precio_compra > (0)::numeric) AND (precio_venta > (0)::numeric)) THEN round((((precio_venta - precio_compra) / precio_compra) * (100)::numeric), 2)\n    ELSE NULL::numeric\nEND")) @db.Decimal(5, 2)
  id_proveedor_principal                                 Int?
  es_inventariable                                       Boolean?                        @default(true)
  stock_minimo                                           Int?                            @default(0)
  stock_actual                                           Int?                            @default(0)
  unidad_medida                                          String?                         @default("UNIDAD") @db.VarChar(20)
  reemplazado_por                                        Int?
  componentes_compatibles                                Int[]
  observaciones                                          String?
  notas_instalacion                                      String?
  activo                                                 Boolean?                        @default(true)
  fecha_creacion                                         DateTime?                       @default(now()) @db.Timestamp(6)
  creado_por                                             Int?
  fecha_modificacion                                     DateTime?                       @db.Timestamp(6)
  modificado_por                                         Int?
  alertas_stock                                          alertas_stock[]
  usuarios_catalogo_componentes_creado_porTousuarios     usuarios?                       @relation("catalogo_componentes_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_componente_creado_por")
  usuarios_catalogo_componentes_modificado_porTousuarios usuarios?                       @relation("catalogo_componentes_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_componente_modificado_por")
  proveedores                                            proveedores?                    @relation(fields: [id_proveedor_principal], references: [id_proveedor], onUpdate: NoAction, map: "fk_componente_proveedor")
  catalogo_componentes                                   catalogo_componentes?           @relation("catalogo_componentesTocatalogo_componentes", fields: [reemplazado_por], references: [id_componente], onUpdate: NoAction, map: "fk_componente_reemplazado_por")
  other_catalogo_componentes                             catalogo_componentes[]          @relation("catalogo_componentesTocatalogo_componentes")
  tipos_componente                                       tipos_componente                @relation(fields: [id_tipo_componente], references: [id_tipo_componente], onUpdate: NoAction, map: "fk_componente_tipo")
  componentes_equipo                                     componentes_equipo[]
  componentes_usados                                     componentes_usados[]
  items_cotizacion_componentes                           items_cotizacion_componentes[]
  items_propuesta                                        items_propuesta[]
  lotes_componentes                                      lotes_componentes[]
  movimientos_inventario                                 movimientos_inventario[]
  ordenes_compra_detalle                                 ordenes_compra_detalle[]
  remisiones_detalle                                     remisiones_detalle[]

  @@index([referencia_fabricante], map: "idx_componente_referencia")
  @@index([id_tipo_componente], map: "idx_componente_tipo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model catalogo_servicios {
  id_servicio                                          Int                          @id @default(autoincrement())
  codigo_servicio                                      String                       @unique @db.VarChar(50)
  nombre_servicio                                      String                       @db.VarChar(200)
  descripcion                                          String?
  categoria                                            categoria_servicio_enum
  id_tipo_servicio                                     Int?
  id_tipo_equipo                                       Int?
  duracion_estimada_horas                              Decimal?                     @db.Decimal(4, 2)
  requiere_certificacion                               Boolean?                     @default(false)
  tipo_certificacion_requerida                         String?                      @db.VarChar(50)
  precio_base                                          Decimal?                     @db.Decimal(12, 2)
  incluye_repuestos                                    Boolean?                     @default(false)
  activo                                               Boolean?                     @default(true)
  observaciones                                        String?
  creado_por                                           Int?
  fecha_creacion                                       DateTime?                    @default(now()) @db.Timestamp(6)
  modificado_por                                       Int?
  fecha_modificacion                                   DateTime?                    @db.Timestamp(6)
  usuarios_catalogo_servicios_creado_porTousuarios     usuarios?                    @relation("catalogo_servicios_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  tipos_equipo                                         tipos_equipo?                @relation(fields: [id_tipo_equipo], references: [id_tipo_equipo], onDelete: NoAction, onUpdate: NoAction)
  tipos_servicio                                       tipos_servicio?              @relation(fields: [id_tipo_servicio], references: [id_tipo_servicio], onDelete: NoAction, onUpdate: NoAction)
  usuarios_catalogo_servicios_modificado_porTousuarios usuarios?                    @relation("catalogo_servicios_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  detalle_servicios_orden                              detalle_servicios_orden[]
  items_cotizacion_servicios                           items_cotizacion_servicios[]
  items_propuesta                                      items_propuesta[]

  @@index([categoria], map: "idx_servicios_categoria")
  @@index([codigo_servicio], map: "idx_servicios_codigo")
  @@index([id_tipo_equipo], map: "idx_servicios_tipo_equipo")
  @@index([id_tipo_servicio], map: "idx_servicios_tipo_servicio")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model catalogo_sistemas {
  id_sistema           Int                    @id @default(autoincrement())
  codigo_sistema       String                 @unique @db.VarChar(50)
  nombre_sistema       String                 @db.VarChar(100)
  descripcion          String?
  aplica_a             String[]               @db.VarChar(50)
  orden_visualizacion  Int
  icono                String?                @db.VarChar(50)
  color_hex            String?                @db.VarChar(7)
  activo               Boolean?               @default(true)
  observaciones        String?
  fecha_creacion       DateTime?              @default(now()) @db.Timestamp(6)
  catalogo_actividades catalogo_actividades[]

  @@index([orden_visualizacion], map: "idx_sistemas_orden")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model certificaciones_tecnicas {
  id_certificacion               Int                        @id @default(autoincrement())
  id_empleado                    Int
  tipo_certificacion             tipo_certificacion_enum
  nombre_certificacion           String                     @db.VarChar(200)
  entidad_certificadora          String                     @db.VarChar(200)
  numero_certificacion           String?                    @db.VarChar(50)
  fecha_expedicion               DateTime                   @db.Date
  fecha_vencimiento              DateTime?                  @db.Date
  nivel_certificacion            String?                    @db.VarChar(50)
  archivo_certificado            String?                    @db.VarChar(500)
  vigente                        Boolean?                   @default(true)
  es_renovacion                  Boolean?                   @default(false)
  id_certificacion_anterior      Int?
  observaciones                  String?
  fecha_registro                 DateTime?                  @default(now()) @db.Timestamp(6)
  registrado_por                 Int
  certificaciones_tecnicas       certificaciones_tecnicas?  @relation("certificaciones_tecnicasTocertificaciones_tecnicas", fields: [id_certificacion_anterior], references: [id_certificacion], onUpdate: NoAction, map: "fk_certificaciones_anterior")
  other_certificaciones_tecnicas certificaciones_tecnicas[] @relation("certificaciones_tecnicasTocertificaciones_tecnicas")
  empleados                      empleados                  @relation(fields: [id_empleado], references: [id_empleado], onDelete: Cascade, onUpdate: NoAction, map: "fk_certificaciones_empleado")
  usuarios                       usuarios                   @relation(fields: [registrado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_certificaciones_registrado_por")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model clientes {
  id_cliente                                 Int                              @id @default(autoincrement())
  id_persona                                 Int                              @unique
  codigo_cliente                             String?                          @default(dbgenerated("('CLI-'::text || lpad((id_cliente)::text, 5, '0'::text))")) @db.VarChar(20)
  tipo_cliente                               tipo_cliente_enum                @default(COMERCIAL)
  fecha_inicio_servicio                      DateTime?                        @db.Date
  periodicidad_mantenimiento                 periodicidad_mantenimiento_enum? @default(SIN_DEFINIR)
  id_firma_administrativa                    Int?
  id_asesor_asignado                         Int?
  descuento_autorizado                       Decimal?                         @default(0) @db.Decimal(5, 2)
  tiene_credito                              Boolean?                         @default(false)
  limite_credito                             Decimal?                         @db.Decimal(15, 2)
  dias_credito                               Int?                             @default(0)
  cliente_activo                             Boolean?                         @default(true)
  fecha_ultimo_servicio                      DateTime?                        @db.Date
  fecha_proximo_servicio                     DateTime?                        @db.Date
  tiene_acceso_portal                        Boolean?                         @default(false)
  fecha_activacion_portal                    DateTime?                        @db.Date
  observaciones_servicio                     String?
  requisitos_especiales                      String?
  creado_por                                 Int?
  fecha_creacion                             DateTime?                        @default(now()) @db.Timestamp(6)
  modificado_por                             Int?
  fecha_modificacion                         DateTime?                        @db.Timestamp(6)
  bitacoras                                  bitacoras[]
  usuarios_clientes_creado_porTousuarios     usuarios?                        @relation("clientes_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_clientes_creado_por")
  usuarios_clientes_modificado_porTousuarios usuarios?                        @relation("clientes_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_clientes_modificado_por")
  persona                                    personas                         @relation(fields: [id_persona], references: [id_persona], onDelete: Cascade, onUpdate: NoAction, map: "fk_clientes_persona")
  contratos_mantenimiento                    contratos_mantenimiento[]
  cotizaciones                               cotizaciones[]
  equipos                                    equipos[]
  ordenes_servicio                           ordenes_servicio[]
  propuestas_correctivo                      propuestas_correctivo[]
  sedes_cliente                              sedes_cliente[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model componentes_equipo {
  id_componente_equipo                                 Int                   @id @default(autoincrement())
  id_equipo                                            Int
  id_tipo_componente                                   Int
  id_componente                                        Int?
  posicion_descripcion                                 String                @db.VarChar(100)
  referencia_manual                                    String?               @db.VarChar(100)
  marca_manual                                         String?               @db.VarChar(100)
  unidades_por_cambio                                  Int?                  @default(1)
  especificaciones_adicionales                         Json?
  fecha_instalacion_inicial                            DateTime?             @db.Date
  fecha_ultimo_cambio                                  DateTime?             @db.Date
  notas                                                String?
  activo                                               Boolean?              @default(true)
  fecha_desactivacion                                  DateTime?             @db.Date
  motivo_desactivacion                                 String?               @db.VarChar(500)
  creado_por                                           Int
  fecha_creacion                                       DateTime?             @default(now()) @db.Timestamp(6)
  modificado_por                                       Int?
  fecha_modificacion                                   DateTime?             @db.Timestamp(6)
  catalogo_componentes                                 catalogo_componentes? @relation(fields: [id_componente], references: [id_componente], onUpdate: NoAction, map: "fk_componente_equipo_catalogo")
  usuarios_componentes_equipo_creado_porTousuarios     usuarios              @relation("componentes_equipo_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_componente_equipo_creado_por")
  equipos                                              equipos               @relation(fields: [id_equipo], references: [id_equipo], onDelete: Cascade, onUpdate: NoAction, map: "fk_componente_equipo_equipo")
  usuarios_componentes_equipo_modificado_porTousuarios usuarios?             @relation("componentes_equipo_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_componente_equipo_modificado_por")
  tipos_componente                                     tipos_componente      @relation(fields: [id_tipo_componente], references: [id_tipo_componente], onUpdate: NoAction, map: "fk_componente_equipo_tipo")

  @@index([id_equipo], map: "idx_componente_equipo_equipo")
  @@index([id_tipo_componente], map: "idx_componente_equipo_tipo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model componentes_usados {
  id_componente_usado                                  Int                     @id @default(autoincrement())
  id_orden_servicio                                    Int
  id_componente                                        Int?
  id_tipo_componente                                   Int?
  id_actividad_ejecutada                               Int?
  descripcion                                          String                  @db.VarChar(200)
  referencia_manual                                    String?                 @db.VarChar(100)
  marca_manual                                         String?                 @db.VarChar(100)
  cantidad                                             Decimal                 @default(1) @db.Decimal(10, 2)
  unidad                                               String?                 @default("unidad") @db.VarChar(20)
  costo_unitario                                       Decimal?                @db.Decimal(12, 2)
  costo_total                                          Decimal?                @db.Decimal(12, 2)
  estado_componente_retirado                           estado_actividad_enum?
  razon_uso                                            String?
  componente_guardado                                  Boolean?                @default(false)
  origen_componente                                    origen_componente_enum? @default(BODEGA)
  observaciones                                        String?
  fecha_uso                                            DateTime?               @default(now()) @db.Timestamp(6)
  usado_por                                            Int?
  fecha_registro                                       DateTime?               @default(now()) @db.Timestamp(6)
  registrado_por                                       Int?
  fecha_modificacion                                   DateTime?               @db.Timestamp(6)
  modificado_por                                       Int?
  actividades_ejecutadas                               actividades_ejecutadas? @relation(fields: [id_actividad_ejecutada], references: [id_actividad_ejecutada], onDelete: NoAction, onUpdate: NoAction)
  catalogo_componentes                                 catalogo_componentes?   @relation(fields: [id_componente], references: [id_componente], onDelete: NoAction, onUpdate: NoAction)
  ordenes_servicio                                     ordenes_servicio        @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)
  tipos_componente                                     tipos_componente?       @relation(fields: [id_tipo_componente], references: [id_tipo_componente], onDelete: NoAction, onUpdate: NoAction)
  usuarios_componentes_usados_modificado_porTousuarios usuarios?               @relation("componentes_usados_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  usuarios_componentes_usados_registrado_porTousuarios usuarios?               @relation("componentes_usados_registrado_porTousuarios", fields: [registrado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  empleados                                            empleados?              @relation(fields: [usado_por], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)

  @@index([fecha_uso(sort: Desc)], map: "idx_componentes_usados_fecha")
  @@index([id_orden_servicio], map: "idx_componentes_usados_orden")
  @@index([origen_componente], map: "idx_componentes_usados_origen")
  @@index([usado_por], map: "idx_componentes_usados_tecnico")
  @@index([id_tipo_componente], map: "idx_componentes_usados_tipo")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model contactos_adicionales {
  id_contacto                                             Int       @id @default(autoincrement())
  id_persona                                              Int
  nombre_contacto                                         String    @db.VarChar(200)
  cargo                                                   String?   @db.VarChar(100)
  telefono                                                String?   @db.VarChar(20)
  celular                                                 String?   @db.VarChar(20)
  email                                                   String?   @db.VarChar(150)
  tipo_contacto                                           String?
  responsabilidades                                       String?
  activo                                                  Boolean?  @default(true)
  observaciones                                           String?
  fecha_registro                                          DateTime? @default(now()) @db.Timestamp(6)
  registrado_por                                          Int
  fecha_modificacion                                      DateTime? @db.Timestamp(6)
  modificado_por                                          Int?
  usuarios_contactos_adicionales_modificado_porTousuarios usuarios? @relation("contactos_adicionales_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_contacto_modificado_por")
  persona                                                 personas  @relation(fields: [id_persona], references: [id_persona], onDelete: Cascade, onUpdate: NoAction, map: "fk_contacto_persona")
  usuarios_contactos_adicionales_registrado_porTousuarios usuarios  @relation("contactos_adicionales_registrado_porTousuarios", fields: [registrado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_contacto_registrado_por")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model contratos_mantenimiento {
  id_contrato                  Int                              @id @default(autoincrement())
  codigo_contrato              String                           @unique @db.VarChar(50)
  id_cliente                   Int
  id_asesor_responsable        Int
  tipo_contrato                tipo_contrato_mantenimiento_enum @default(PREVENTIVO_RECURRENTE)
  periodicidad_default         periodicidad_enum                @default(MENSUAL)
  fecha_inicio                 DateTime                         @db.Date
  fecha_fin                    DateTime?                        @db.Date
  estado_contrato              estado_contrato_enum             @default(ACTIVO)
  genera_automaticamente       Boolean                          @default(true)
  dias_anticipacion_generacion Int                              @default(7)
  observaciones                String?
  fecha_creacion               DateTime                         @default(now()) @db.Timestamp(6)
  creado_por                   Int
  empleados                    empleados                        @relation(fields: [id_asesor_responsable], references: [id_empleado], onUpdate: NoAction, map: "fk_contrato_asesor")
  clientes                     clientes                         @relation(fields: [id_cliente], references: [id_cliente], onUpdate: NoAction, map: "fk_contrato_cliente")
  usuarios                     usuarios                         @relation(fields: [creado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_contrato_creado_por")
  cronogramas_servicio         cronogramas_servicio[]
  equipos_contrato             equipos_contrato[]
  historial_contrato           historial_contrato[]

  @@index([id_asesor_responsable], map: "idx_contratos_asesor")
  @@index([id_cliente], map: "idx_contratos_cliente")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model cotizaciones {
  id_cotizacion                                             Int                            @id @default(autoincrement())
  numero_cotizacion                                         String                         @unique @db.VarChar(50)
  id_cliente                                                Int
  id_sede                                                   Int?
  id_equipo                                                 Int?
  fecha_cotizacion                                          DateTime?                      @default(dbgenerated("CURRENT_DATE")) @db.Date
  fecha_vencimiento                                         DateTime                       @db.Date
  dias_validez                                              Int?                           @default(15)
  id_estado                                                 Int
  fecha_cambio_estado                                       DateTime?                      @default(now()) @db.Timestamp(6)
  id_motivo_rechazo                                         Int?
  observaciones_rechazo                                     String?
  asunto                                                    String                         @db.VarChar(300)
  descripcion_general                                       String?
  alcance_trabajo                                           String?
  exclusiones                                               String?
  subtotal_servicios                                        Decimal?                       @db.Decimal(12, 2)
  subtotal_componentes                                      Decimal?                       @db.Decimal(12, 2)
  subtotal_general                                          Decimal?                       @db.Decimal(12, 2)
  descuento_porcentaje                                      Decimal?                       @default(0) @db.Decimal(5, 2)
  descuento_valor                                           Decimal?                       @db.Decimal(12, 2)
  subtotal_con_descuento                                    Decimal?                       @db.Decimal(12, 2)
  iva_porcentaje                                            Decimal?                       @default(0) @db.Decimal(5, 2)
  iva_valor                                                 Decimal?                       @db.Decimal(12, 2)
  total_cotizacion                                          Decimal?                       @db.Decimal(12, 2)
  forma_pago                                                String?                        @default("CONTADO") @db.VarChar(100)
  terminos_condiciones                                      String?
  meses_garantia                                            Int?                           @default(3)
  observaciones_garantia                                    String?
  tiempo_estimado_dias                                      Int?
  version                                                   Int?                           @default(1)
  id_cotizacion_padre                                       Int?
  id_orden_servicio_generada                                Int?
  fecha_conversion_os                                       DateTime?                      @db.Timestamp(6)
  metadata                                                  Json?
  elaborada_por                                             Int
  fecha_creacion                                            DateTime?                      @default(now()) @db.Timestamp(6)
  aprobada_internamente_por                                 Int?
  fecha_aprobacion_interna                                  DateTime?                      @db.Timestamp(6)
  modificado_por                                            Int?
  fecha_modificacion                                        DateTime?                      @db.Timestamp(6)
  aprobaciones_cotizacion                                   aprobaciones_cotizacion[]
  usuarios_cotizaciones_aprobada_internamente_porTousuarios usuarios?                      @relation("cotizaciones_aprobada_internamente_porTousuarios", fields: [aprobada_internamente_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  empleados                                                 empleados                      @relation(fields: [elaborada_por], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)
  clientes                                                  clientes                       @relation(fields: [id_cliente], references: [id_cliente], onDelete: NoAction, onUpdate: NoAction)
  cotizaciones                                              cotizaciones?                  @relation("cotizacionesTocotizaciones", fields: [id_cotizacion_padre], references: [id_cotizacion], onDelete: NoAction, onUpdate: NoAction)
  other_cotizaciones                                        cotizaciones[]                 @relation("cotizacionesTocotizaciones")
  equipos                                                   equipos?                       @relation(fields: [id_equipo], references: [id_equipo], onDelete: NoAction, onUpdate: NoAction)
  estados_cotizacion                                        estados_cotizacion             @relation(fields: [id_estado], references: [id_estado], onDelete: NoAction, onUpdate: NoAction)
  motivos_rechazo                                           motivos_rechazo?               @relation(fields: [id_motivo_rechazo], references: [id_motivo_rechazo], onDelete: NoAction, onUpdate: NoAction)
  ordenes_servicio                                          ordenes_servicio?              @relation(fields: [id_orden_servicio_generada], references: [id_orden_servicio], onDelete: NoAction, onUpdate: NoAction)
  sedes_cliente                                             sedes_cliente?                 @relation(fields: [id_sede], references: [id_sede], onDelete: NoAction, onUpdate: NoAction)
  usuarios_cotizaciones_modificado_porTousuarios            usuarios?                      @relation("cotizaciones_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  historial_envios                                          historial_envios[]
  items_cotizacion_componentes                              items_cotizacion_componentes[]
  items_cotizacion_servicios                                items_cotizacion_servicios[]
  remisiones                                                remisiones[]
  versiones_cotizacion                                      versiones_cotizacion[]

  @@index([elaborada_por, id_estado], map: "idx_cot_asesor")
  @@index([id_cliente, fecha_cotizacion(sort: Desc)], map: "idx_cot_cliente")
  @@index([id_estado, fecha_cotizacion(sort: Desc)], map: "idx_cot_estado")
  @@index([id_estado, fecha_vencimiento], map: "idx_cot_pendientes")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model cronogramas_servicio {
  id_cronograma              Int                     @id @default(autoincrement())
  id_contrato                Int
  id_equipo                  Int
  id_equipo_contrato         Int
  tipo_servicio_programado   Int
  fecha_prevista             DateTime                @db.Date
  fecha_inicio_ventana       DateTime?               @db.Date
  fecha_fin_ventana          DateTime?               @db.Date
  fecha_base_calculo         DateTime?               @db.Date
  estado_cronograma          estado_cronograma_enum  @default(PENDIENTE)
  id_orden_servicio_generada Int?
  fecha_generacion_os        DateTime?               @db.Timestamp(6)
  fecha_completado           DateTime?               @db.Timestamp(6)
  prioridad                  prioridad_enum          @default(NORMAL)
  observaciones_programacion String?
  fecha_creacion             DateTime                @default(now()) @db.Timestamp(6)
  creado_por                 Int
  secuencia_contrato         Int?
  contratos_mantenimiento    contratos_mantenimiento @relation(fields: [id_contrato], references: [id_contrato], onUpdate: NoAction, map: "fk_cronograma_contrato")
  usuarios                   usuarios                @relation(fields: [creado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_cronograma_creado_por")
  equipos                    equipos                 @relation(fields: [id_equipo], references: [id_equipo], onUpdate: NoAction, map: "fk_cronograma_equipo")
  equipos_contrato           equipos_contrato        @relation(fields: [id_equipo_contrato], references: [id_equipo_contrato], onUpdate: NoAction, map: "fk_cronograma_equipo_contrato")
  ordenes_servicio           ordenes_servicio?       @relation(fields: [id_orden_servicio_generada], references: [id_orden_servicio], onUpdate: NoAction, map: "fk_cronograma_orden_servicio")
  tipos_servicio             tipos_servicio          @relation(fields: [tipo_servicio_programado], references: [id_tipo_servicio], onUpdate: NoAction, map: "fk_cronograma_tipo_servicio")

  @@unique([id_equipo_contrato, fecha_prevista], map: "uk_cronograma_equipo_fecha")
  @@index([id_contrato], map: "idx_cronogramas_contrato")
  @@index([id_equipo], map: "idx_cronogramas_equipo")
  @@index([id_equipo_contrato], map: "idx_cronogramas_equipo_contrato")
  @@index([estado_cronograma], map: "idx_cronogramas_estado")
  @@index([fecha_prevista(sort: Desc), estado_cronograma], map: "idx_cronogramas_fecha_prevista")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model detalle_servicios_orden {
  id_detalle_servicio                                       Int                           @id @default(autoincrement())
  id_orden_servicio                                         Int
  id_servicio                                               Int
  cantidad                                                  Decimal                       @default(1) @db.Decimal(10, 2)
  id_tecnico_ejecutor                                       Int?
  fecha_inicio_servicio                                     DateTime?                     @db.Timestamp(6)
  fecha_fin_servicio                                        DateTime?                     @db.Timestamp(6)
  duracion_servicio_minutos                                 Int?
  precio_unitario                                           Decimal                       @db.Decimal(12, 2)
  descuento_porcentaje                                      Decimal?                      @default(0) @db.Decimal(5, 2)
  subtotal                                                  Decimal?                      @db.Decimal(12, 2)
  tiene_garantia_servicio                                   Boolean?                      @default(false)
  meses_garantia_servicio                                   Int?
  observaciones                                             String?
  justificacion_precio                                      String?
  estado_servicio                                           estado_detalle_servicio_enum? @default(PENDIENTE)
  fecha_registro                                            DateTime?                     @default(now()) @db.Timestamp(6)
  registrado_por                                            Int?
  fecha_modificacion                                        DateTime?                     @db.Timestamp(6)
  modificado_por                                            Int?
  ordenes_servicio                                          ordenes_servicio              @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)
  catalogo_servicios                                        catalogo_servicios            @relation(fields: [id_servicio], references: [id_servicio], onDelete: NoAction, onUpdate: NoAction)
  empleados                                                 empleados?                    @relation(fields: [id_tecnico_ejecutor], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)
  usuarios_detalle_servicios_orden_modificado_porTousuarios usuarios?                     @relation("detalle_servicios_orden_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  usuarios_detalle_servicios_orden_registrado_porTousuarios usuarios?                     @relation("detalle_servicios_orden_registrado_porTousuarios", fields: [registrado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([id_orden_servicio], map: "idx_detalle_orden")
  @@index([id_servicio], map: "idx_detalle_servicio")
  @@index([id_tecnico_ejecutor], map: "idx_detalle_tecnico")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model devoluciones_proveedor {
  id_devolucion     Int                              @id @default(autoincrement())
  numero_devolucion String                           @unique @db.VarChar(50)
  id_orden_compra   Int
  id_lote           Int?
  motivo            motivo_devolucion_proveedor_enum
  cantidad_devuelta Decimal                          @db.Decimal(10, 2)
  estado_devolucion estado_devolucion_proveedor_enum @default(SOLICITADA)
  observaciones     String?
  solicitada_por    Int
  fecha_solicitud   DateTime                         @default(now()) @db.Timestamp(6)
  fecha_devolucion  DateTime?                        @db.Timestamp(6)
  lotes_componentes lotes_componentes?               @relation(fields: [id_lote], references: [id_lote], onUpdate: NoAction, map: "fk_devolucion_lote")
  ordenes_compra    ordenes_compra                   @relation(fields: [id_orden_compra], references: [id_orden_compra], onUpdate: NoAction, map: "fk_devolucion_orden_compra")
  usuarios          usuarios                         @relation(fields: [solicitada_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_devolucion_solicitada_por")

  @@index([estado_devolucion], map: "idx_devolucion_estado")
  @@index([id_orden_compra], map: "idx_devolucion_orden_compra")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model documentos_generados {
  id_documento           Int                 @id @default(autoincrement())
  tipo_documento         tipo_documento_enum
  id_referencia          Int
  numero_documento       String?             @db.VarChar(100)
  ruta_archivo           String              @unique @db.VarChar(500)
  hash_sha256            String              @unique @db.VarChar(64)
  tama_o_bytes           BigInt              @map("tamaÃ±o_bytes")
  mime_type              String              @default("application/pdf") @db.VarChar(50)
  numero_paginas         Int?
  fecha_generacion       DateTime            @default(now()) @db.Timestamp(6)
  generado_por           Int
  herramienta_generacion String?             @db.VarChar(50)
  bitacoras              bitacoras[]
  usuarios               usuarios            @relation(fields: [generado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_documento_generado_por")
  informes               informes[]

  @@index([hash_sha256], map: "idx_documentos_hash_sha256", type: Hash)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model empleados {
  id_empleado                                                      Int                          @id @default(autoincrement())
  id_persona                                                       Int                          @unique
  codigo_empleado                                                  String?                      @default(dbgenerated("('EMP-'::text || lpad((id_empleado)::text, 5, '0'::text))")) @db.VarChar(20)
  cargo                                                            cargo_empleado_enum
  descripcion_cargo                                                String?                      @db.VarChar(200)
  fecha_ingreso                                                    DateTime                     @db.Date
  fecha_retiro                                                     DateTime?                    @db.Date
  motivo_retiro                                                    String?                      @db.VarChar(500)
  tipo_contrato                                                    tipo_contrato_empleado_enum? @default(INDEFINIDO)
  departamento                                                     String?                      @db.VarChar(100)
  jefe_inmediato                                                   Int?
  contacto_emergencia                                              String                       @db.VarChar(200)
  telefono_emergencia                                              String                       @db.VarChar(20)
  nivel_academico                                                  nivel_academico_enum?
  titulo_obtenido                                                  String?                      @db.VarChar(200)
  institucion_educativa                                            String?                      @db.VarChar(200)
  es_tecnico                                                       Boolean?                     @default(false)
  es_asesor                                                        Boolean?                     @default(false)
  puede_conducir                                                   Boolean?                     @default(false)
  licencia_conduccion                                              String?                      @db.VarChar(50)
  fecha_vencimiento_licencia                                       DateTime?                    @db.Date
  empleado_activo                                                  Boolean?                     @default(true)
  observaciones                                                    String?
  habilidades_especiales                                           String?
  creado_por                                                       Int
  fecha_creacion                                                   DateTime?                    @default(now()) @db.Timestamp(6)
  modificado_por                                                   Int?
  fecha_modificacion                                               DateTime?                    @db.Timestamp(6)
  actividades_ejecutadas                                           actividades_ejecutadas[]
  certificaciones_tecnicas                                         certificaciones_tecnicas[]
  componentes_usados                                               componentes_usados[]
  contratos_mantenimiento                                          contratos_mantenimiento[]
  cotizaciones                                                     cotizaciones[]
  detalle_servicios_orden                                          detalle_servicios_orden[]
  usuarios_empleados_creado_porTousuarios                          usuarios                     @relation("empleados_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_empleados_creado_por")
  empleados                                                        empleados?                   @relation("empleadosToempleados", fields: [jefe_inmediato], references: [id_empleado], onUpdate: NoAction, map: "fk_empleados_jefe")
  other_empleados                                                  empleados[]                  @relation("empleadosToempleados")
  usuarios_empleados_modificado_porTousuarios                      usuarios?                    @relation("empleados_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_empleados_modificado_por")
  persona                                                          personas                     @relation(fields: [id_persona], references: [id_persona], onDelete: Cascade, onUpdate: NoAction, map: "fk_empleados_persona")
  evidencias_fotograficas                                          evidencias_fotograficas[]
  gastos_orden                                                     gastos_orden[]
  mediciones_servicio                                              mediciones_servicio[]
  ordenes_servicio_ordenes_servicio_id_supervisorToempleados       ordenes_servicio[]           @relation("ordenes_servicio_id_supervisorToempleados")
  ordenes_servicio_ordenes_servicio_id_tecnico_asignadoToempleados ordenes_servicio[]           @relation("ordenes_servicio_id_tecnico_asignadoToempleados")
  propuestas_correctivo                                            propuestas_correctivo[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model equipos {
  id_equipo                                 Int                        @id @default(autoincrement())
  codigo_equipo                             String                     @unique @db.VarChar(30)
  id_cliente                                Int
  id_sede                                   Int?
  id_tipo_equipo                            Int
  nombre_equipo                             String?                    @db.VarChar(200)
  numero_serie_equipo                       String?                    @unique(map: "uk_numero_serie_unico") @db.VarChar(100)
  ubicacion_texto                           String                     @db.VarChar(500)
  ubicacion_detallada                       Json?
  estado_equipo                             estado_equipo_enum         @default(OPERATIVO)
  criticidad                                criticidad_enum            @default(MEDIA)
  criticidad_justificacion                  String?
  fecha_instalacion                         DateTime?                  @db.Date
  fecha_inicio_servicio_mekanos             DateTime?                  @db.Date
  fecha_registro                            DateTime?                  @default(dbgenerated("CURRENT_DATE")) @db.Date
  en_garantia                               Boolean?                   @default(false)
  fecha_inicio_garantia                     DateTime?                  @db.Date
  fecha_fin_garantia                        DateTime?                  @db.Date
  proveedor_garantia                        String?                    @db.VarChar(200)
  horas_actuales                            Decimal?                   @default(0) @db.Decimal(10, 2)
  fecha_ultima_lectura_horas                DateTime?                  @db.Timestamp(6)
  estado_pintura                            estado_pintura_enum?       @default(BUENO)
  requiere_pintura                          Boolean?                   @default(false)
  tipo_contrato                             tipo_contrato_enum?        @default(SIN_CONTRATO)
  intervalo_tipo_a_dias_override            Int?
  intervalo_tipo_a_horas_override           Decimal?                   @db.Decimal(10, 1)
  intervalo_tipo_b_dias_override            Int?
  intervalo_tipo_b_horas_override           Decimal?                   @db.Decimal(10, 1)
  criterio_intervalo_override               criterio_intervalo_enum?
  observaciones_generales                   String?
  configuracion_especial                    String?
  activo                                    Boolean?                   @default(true)
  fecha_baja                                DateTime?                  @db.Date
  motivo_baja                               String?                    @db.VarChar(500)
  creado_por                                Int
  fecha_creacion                            DateTime?                  @default(now()) @db.Timestamp(6)
  modificado_por                            Int?
  fecha_modificacion                        DateTime?                  @db.Timestamp(6)
  metadata                                  Json?
  archivos_equipo                           archivos_equipo[]
  componentes_equipo                        componentes_equipo[]
  cotizaciones                              cotizaciones[]
  cronogramas_servicio                      cronogramas_servicio[]
  clientes                                  clientes                   @relation(fields: [id_cliente], references: [id_cliente], onUpdate: NoAction, map: "fk_equipos_cliente")
  usuarios_equipos_creado_porTousuarios     usuarios                   @relation("equipos_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_equipos_creado_por")
  usuarios_equipos_modificado_porTousuarios usuarios?                  @relation("equipos_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_equipos_modificado_por")
  sedes_cliente                             sedes_cliente?             @relation(fields: [id_sede], references: [id_sede], onDelete: Restrict, onUpdate: NoAction, map: "fk_equipos_sede")
  tipos_equipo                              tipos_equipo               @relation(fields: [id_tipo_equipo], references: [id_tipo_equipo], onUpdate: NoAction, map: "fk_equipos_tipo")
  equipos_bomba                             equipos_bomba?
  equipos_contrato                          equipos_contrato[]
  equipos_generador                         equipos_generador?
  equipos_motor                             equipos_motor?
  historial_estados_equipo                  historial_estados_equipo[]
  lecturas_horometro                        lecturas_horometro[]
  ordenes_equipos                           ordenes_equipos[]
  ordenes_servicio                          ordenes_servicio[]
  propuestas_correctivo                     propuestas_correctivo[]

  @@index([id_cliente, id_sede], map: "idx_equipos_cliente_sede")
  @@index([codigo_equipo], map: "idx_equipos_codigo")
  @@index([id_tipo_equipo], map: "idx_equipos_tipo")
  @@index([id_cliente], map: "idx_equipos_cliente")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model equipos_bomba {
  id_equipo                                       Int                    @id
  marca_bomba                                     String                 @db.VarChar(100)
  modelo_bomba                                    String?                @db.VarChar(100)
  numero_serie_bomba                              String?                @db.VarChar(100)
  tipo_bomba                                      tipo_bomba_enum
  aplicacion_bomba                                aplicacion_bomba_enum?
  diametro_aspiracion                             String?                @db.VarChar(50)
  diametro_descarga                               String?                @db.VarChar(50)
  caudal_maximo_m3h                               Decimal?               @db.Decimal(10, 2)
  altura_manometrica_maxima_m                     Decimal?               @db.Decimal(8, 2)
  altura_presion_trabajo_m                        Decimal?               @db.Decimal(8, 2)
  potencia_hidraulica_kw                          Decimal?               @db.Decimal(10, 2)
  eficiencia_porcentaje                           Decimal?               @db.Decimal(5, 2)
  numero_total_bombas_sistema                     Int?                   @default(1)
  numero_bomba_en_sistema                         Int?                   @default(1)
  tiene_panel_control                             Boolean?               @default(false)
  marca_panel_control                             String?                @db.VarChar(100)
  modelo_panel_control                            String?                @db.VarChar(100)
  tiene_presostato                                Boolean?               @default(false)
  marca_presostato                                String?                @db.VarChar(100)
  modelo_presostato                               String?                @db.VarChar(100)
  presion_encendido_psi                           Decimal?               @db.Decimal(6, 2)
  presion_apagado_psi                             Decimal?               @db.Decimal(6, 2)
  tiene_contactor_externo                         Boolean?               @default(false)
  marca_contactor                                 String?                @db.VarChar(100)
  amperaje_contactor                              Decimal?               @db.Decimal(6, 2)
  tiene_arrancador_suave                          Boolean?               @default(false)
  tiene_variador_frecuencia                       Boolean?               @default(false)
  marca_variador                                  String?                @db.VarChar(100)
  modelo_variador                                 String?                @db.VarChar(100)
  tiene_tanques_hidroneumaticos                   Boolean?               @default(false)
  cantidad_tanques                                Int?
  capacidad_tanques_litros                        Decimal?               @db.Decimal(10, 2)
  presion_tanques_psi                             Decimal?               @db.Decimal(6, 2)
  tiene_manometro                                 Boolean?               @default(false)
  rango_manometro_min_psi                         Decimal?               @default(0) @db.Decimal(6, 2)
  rango_manometro_max_psi                         Decimal?               @db.Decimal(6, 2)
  tiene_proteccion_nivel                          Boolean?               @default(false)
  tipo_proteccion_nivel                           String?                @db.VarChar(50)
  tiene_valvula_purga                             Boolean?               @default(false)
  tiene_valvula_cebado                            Boolean?               @default(false)
  tiene_valvula_cheque                            Boolean?               @default(false)
  tiene_valvula_pie                               Boolean?               @default(false)
  referencia_sello_mecanico                       String?                @db.VarChar(100)
  a_o_fabricacion                                 Int?                   @map("aÃ±o_fabricacion")
  observaciones                                   String?
  metadata                                        Json?
  creado_por                                      Int
  fecha_creacion                                  DateTime?              @default(now()) @db.Timestamp(6)
  modificado_por                                  Int?
  fecha_modificacion                              DateTime?              @db.Timestamp(6)
  usuarios_equipos_bomba_creado_porTousuarios     usuarios               @relation("equipos_bomba_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_bomba_creado_por")
  equipos                                         equipos                @relation(fields: [id_equipo], references: [id_equipo], onDelete: Cascade, onUpdate: NoAction, map: "fk_bomba_equipo")
  usuarios_equipos_bomba_modificado_porTousuarios usuarios?              @relation("equipos_bomba_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_bomba_modificado_por")

  @@index([marca_bomba], map: "idx_bomba_marca")
  @@index([tipo_bomba, aplicacion_bomba], map: "idx_bomba_tipo_aplicacion")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model equipos_contrato {
  id_equipo_contrato      Int                     @id @default(autoincrement())
  id_contrato             Int
  id_equipo               Int
  tipo_servicio_default   Int
  criterio_intervalo      criterio_intervalo_enum @default(DIAS)
  intervalo_dias          Int?
  intervalo_horas         Int?
  activo_en_contrato      Boolean                 @default(true)
  fecha_inclusion         DateTime                @default(dbgenerated("CURRENT_DATE")) @db.Date
  fecha_exclusion         DateTime?               @db.Date
  cronogramas_servicio    cronogramas_servicio[]
  contratos_mantenimiento contratos_mantenimiento @relation(fields: [id_contrato], references: [id_contrato], onDelete: Cascade, onUpdate: NoAction, map: "fk_equipo_contrato_contrato")
  equipos                 equipos                 @relation(fields: [id_equipo], references: [id_equipo], onUpdate: NoAction, map: "fk_equipo_contrato_equipo")
  tipos_servicio          tipos_servicio          @relation(fields: [tipo_servicio_default], references: [id_tipo_servicio], onUpdate: NoAction, map: "fk_equipo_contrato_tipo_servicio")

  @@unique([id_contrato, id_equipo], map: "uk_contrato_equipo_unico")
  @@index([id_contrato], map: "idx_equipos_contrato_contrato")
  @@index([id_equipo], map: "idx_equipos_contrato_equipo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model equipos_generador {
  id_equipo                                           Int       @id
  marca_generador                                     String    @db.VarChar(100)
  modelo_generador                                    String?   @db.VarChar(100)
  numero_serie_generador                              String?   @db.VarChar(100)
  marca_alternador                                    String?   @db.VarChar(100)
  modelo_alternador                                   String?   @db.VarChar(100)
  numero_serie_alternador                             String?   @db.VarChar(100)
  potencia_kw                                         Decimal?  @db.Decimal(10, 2)
  potencia_kva                                        Decimal?  @db.Decimal(10, 2)
  factor_potencia                                     Decimal?  @default(0.8) @db.Decimal(3, 2)
  voltaje_salida                                      String    @db.VarChar(50)
  numero_fases                                        Int?      @default(3)
  frecuencia_hz                                       Int?      @default(60)
  amperaje_nominal_salida                             Decimal?  @db.Decimal(8, 2)
  configuracion_salida                                String?   @db.VarChar(100)
  tiene_avr                                           Boolean?  @default(true)
  marca_avr                                           String?   @db.VarChar(50)
  modelo_avr                                          String?   @db.VarChar(100)
  referencia_avr                                      String?   @db.VarChar(100)
  tiene_modulo_control                                Boolean?  @default(true)
  marca_modulo_control                                String?   @db.VarChar(100)
  modelo_modulo_control                               String?   @db.VarChar(100)
  tiene_arranque_automatico                           Boolean?  @default(true)
  capacidad_tanque_principal_litros                   Decimal?  @db.Decimal(10, 2)
  tiene_tanque_auxiliar                               Boolean?  @default(false)
  capacidad_tanque_auxiliar_litros                    Decimal?  @db.Decimal(10, 2)
  clase_aislamiento                                   String?   @db.VarChar(10)
  grado_proteccion_ip                                 String?   @db.VarChar(10)
  a_o_fabricacion                                     Int?      @map("aÃ±o_fabricacion")
  observaciones                                       String?
  metadata                                            Json?
  creado_por                                          Int
  fecha_creacion                                      DateTime? @default(now()) @db.Timestamp(6)
  modificado_por                                      Int?
  fecha_modificacion                                  DateTime? @db.Timestamp(6)
  usuarios_equipos_generador_creado_porTousuarios     usuarios  @relation("equipos_generador_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_generador_creado_por")
  equipos                                             equipos   @relation(fields: [id_equipo], references: [id_equipo], onDelete: Cascade, onUpdate: NoAction, map: "fk_generador_equipo")
  usuarios_equipos_generador_modificado_porTousuarios usuarios? @relation("equipos_generador_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_generador_modificado_por")

  @@index([marca_generador], map: "idx_generador_marca")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model equipos_motor {
  id_equipo                                       Int                     @id
  tipo_motor                                      tipo_motor_enum
  marca_motor                                     String                  @db.VarChar(100)
  modelo_motor                                    String?                 @db.VarChar(100)
  numero_serie_motor                              String?                 @db.VarChar(100)
  potencia_hp                                     Decimal?                @db.Decimal(10, 2)
  potencia_kw                                     Decimal?                @db.Decimal(10, 2)
  velocidad_nominal_rpm                           Int?
  tipo_combustible                                tipo_combustible_enum?
  numero_cilindros                                Int?
  cilindrada_cc                                   Int?
  tiene_turbocargador                             Boolean?                @default(false)
  tipo_arranque                                   tipo_arranque_enum?     @default(ELECTRICO)
  voltaje_arranque_vdc                            Int?
  amperaje_arranque                               Decimal?                @db.Decimal(8, 2)
  numero_baterias                                 Int?
  referencia_bateria                              String?                 @db.VarChar(100)
  capacidad_bateria_ah                            Int?
  tiene_radiador                                  Boolean?                @default(true)
  radiador_alto_cm                                Decimal?                @db.Decimal(6, 2)
  radiador_ancho_cm                               Decimal?                @db.Decimal(6, 2)
  radiador_espesor_cm                             Decimal?                @db.Decimal(6, 2)
  tiene_cargador_bateria                          Boolean?                @default(false)
  marca_cargador                                  String?                 @db.VarChar(100)
  modelo_cargador                                 String?                 @db.VarChar(100)
  amperaje_cargador                               Decimal?                @db.Decimal(5, 2)
  capacidad_aceite_litros                         Decimal?                @db.Decimal(10, 2)
  tipo_aceite                                     String?                 @db.VarChar(50)
  capacidad_refrigerante_litros                   Decimal?                @db.Decimal(10, 2)
  tipo_refrigerante                               String?                 @db.VarChar(100)
  voltaje_operacion_vac                           String?                 @db.VarChar(30)
  numero_fases                                    numero_fases_enum?
  frecuencia_hz                                   Int?
  clase_aislamiento                               clase_aislamiento_enum?
  grado_proteccion_ip                             String?                 @db.VarChar(10)
  amperaje_nominal                                Decimal?                @db.Decimal(10, 2)
  factor_potencia                                 Decimal?                @db.Decimal(3, 2)
  a_o_fabricacion                                 Int?                    @map("aÃ±o_fabricacion")
  observaciones                                   String?
  metadata                                        Json?
  creado_por                                      Int
  fecha_creacion                                  DateTime?               @default(now()) @db.Timestamp(6)
  modificado_por                                  Int?
  fecha_modificacion                              DateTime?               @db.Timestamp(6)
  usuarios_equipos_motor_creado_porTousuarios     usuarios                @relation("equipos_motor_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_equipos_motor_creado_por")
  equipos                                         equipos                 @relation(fields: [id_equipo], references: [id_equipo], onDelete: Cascade, onUpdate: NoAction, map: "fk_equipos_motor_equipo")
  usuarios_equipos_motor_modificado_porTousuarios usuarios?               @relation("equipos_motor_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_equipos_motor_modificado_por")

  @@index([marca_motor], map: "idx_motor_marca")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model estados_cotizacion {
  id_estado                   Int                     @id @default(autoincrement())
  codigo_estado               String                  @unique @db.VarChar(30)
  nombre_estado               String                  @db.VarChar(100)
  descripcion                 String?
  permite_edicion             Boolean?                @default(true)
  permite_eliminacion         Boolean?                @default(false)
  es_estado_final             Boolean?                @default(false)
  requiere_aprobacion_interna Boolean?                @default(false)
  color_hex                   String?                 @db.VarChar(7)
  icono                       String?                 @db.VarChar(50)
  orden_visualizacion         Int                     @default(999)
  activo                      Boolean?                @default(true)
  fecha_creacion              DateTime?               @default(now()) @db.Timestamp(6)
  cotizaciones                cotizaciones[]
  propuestas_correctivo       propuestas_correctivo[]

  @@index([orden_visualizacion], map: "idx_estados_cot_orden")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model estados_orden {
  id_estado                                                                         Int                       @id @default(autoincrement())
  codigo_estado                                                                     String                    @unique @db.VarChar(30)
  nombre_estado                                                                     String                    @db.VarChar(100)
  descripcion                                                                       String?
  permite_edicion                                                                   Boolean?                  @default(true)
  permite_eliminacion                                                               Boolean?                  @default(false)
  es_estado_final                                                                   Boolean?                  @default(false)
  color_hex                                                                         String?                   @db.VarChar(7)
  icono                                                                             String?                   @db.VarChar(50)
  orden_visualizacion                                                               Int?
  activo                                                                            Boolean?                  @default(true)
  fecha_creacion                                                                    DateTime?                 @default(now()) @db.Timestamp(6)
  historial_estados_orden_historial_estados_orden_id_estado_anteriorToestados_orden historial_estados_orden[] @relation("historial_estados_orden_id_estado_anteriorToestados_orden")
  historial_estados_orden_historial_estados_orden_id_estado_nuevoToestados_orden    historial_estados_orden[] @relation("historial_estados_orden_id_estado_nuevoToestados_orden")
  ordenes_servicio                                                                  ordenes_servicio[]

  @@index([orden_visualizacion], map: "idx_estados_orden_vis")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model evidencias_fotograficas {
  id_evidencia           Int                     @id @default(autoincrement())
  id_orden_servicio      Int
  id_actividad_ejecutada Int?
  tipo_evidencia         tipo_evidencia_enum
  descripcion            String?                 @db.VarChar(500)
  nombre_archivo         String                  @db.VarChar(255)
  ruta_archivo           String                  @unique @db.VarChar(500)
  hash_sha256            String                  @db.VarChar(64)
  tama_o_bytes           BigInt                  @map("tamaÃ±o_bytes")
  mime_type              String?                 @default("image/jpeg") @db.VarChar(50)
  ancho_pixels           Int?
  alto_pixels            Int?
  orden_visualizacion    Int?
  es_principal           Boolean?                @default(false)
  fecha_captura          DateTime?               @default(now()) @db.Timestamp(6)
  capturada_por          Int?
  latitud                Decimal?                @db.Decimal(10, 7)
  longitud               Decimal?                @db.Decimal(10, 7)
  metadata_exif          Json?
  tiene_miniatura        Boolean?                @default(false)
  ruta_miniatura         String?                 @db.VarChar(500)
  esta_comprimida        Boolean?                @default(false)
  tama_o_original_bytes  BigInt?                 @map("tamaÃ±o_original_bytes")
  fecha_registro         DateTime?               @default(now()) @db.Timestamp(6)
  id_orden_equipo        Int?
  empleados              empleados?              @relation(fields: [capturada_por], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)
  actividades_ejecutadas actividades_ejecutadas? @relation(fields: [id_actividad_ejecutada], references: [id_actividad_ejecutada], onDelete: NoAction, onUpdate: NoAction)
  ordenes_equipos        ordenes_equipos?        @relation(fields: [id_orden_equipo], references: [id_orden_equipo], onUpdate: NoAction)
  ordenes_servicio       ordenes_servicio        @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)

  @@index([fecha_captura(sort: Desc)], map: "idx_evidencias_fecha")
  @@index([hash_sha256], map: "idx_evidencias_hash", type: Hash)
  @@index([id_orden_servicio, orden_visualizacion], map: "idx_evidencias_orden_vis")
  @@index([capturada_por], map: "idx_evidencias_tecnico")
  @@index([id_orden_servicio, tipo_evidencia], map: "idx_evidencias_tipo")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model firmas_administrativas {
  id_firma_administrativa                                  Int       @id @default(autoincrement())
  id_persona                                               Int       @unique
  firma_activa                                             Boolean?  @default(true)
  observaciones                                            String?
  requisitos_operativos                                    String?
  creado_por                                               Int
  fecha_creacion                                           DateTime? @default(now()) @db.Timestamp(6)
  modificado_por                                           Int?
  fecha_modificacion                                       DateTime? @db.Timestamp(6)
  usuarios_firmas_administrativas_creado_porTousuarios     usuarios  @relation("firmas_administrativas_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_firma_creado_por")
  usuarios_firmas_administrativas_modificado_porTousuarios usuarios? @relation("firmas_administrativas_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_firma_modificado_por")
  persona                                                  personas  @relation(fields: [id_persona], references: [id_persona], onDelete: Cascade, onUpdate: NoAction, map: "fk_firma_persona")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model firmas_digitales {
  id_firma_digital                                                     Int                     @id @default(autoincrement())
  id_persona                                                           Int
  tipo_firma                                                           tipo_firma_digital_enum
  firma_base64                                                         String
  formato_firma                                                        String?                 @default("PNG") @db.VarChar(10)
  hash_firma                                                           String                  @db.VarChar(64)
  fecha_captura                                                        DateTime?               @default(now()) @db.Timestamp(6)
  es_firma_principal                                                   Boolean?                @default(false)
  activa                                                               Boolean?                @default(true)
  observaciones                                                        String?
  registrada_por                                                       Int
  fecha_registro                                                       DateTime?               @default(now()) @db.Timestamp(6)
  persona                                                              personas                @relation(fields: [id_persona], references: [id_persona], onDelete: Cascade, onUpdate: NoAction, map: "fk_firma_persona")
  usuarios                                                             usuarios                @relation(fields: [registrada_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_firma_registrada_por")
  ordenes_servicio_ordenes_servicio_id_firma_tecnicoTofirmas_digitales ordenes_servicio[]      @relation("ordenes_servicio_id_firma_tecnicoTofirmas_digitales")
  ordenes_servicio                                                     ordenes_servicio[]

  @@index([hash_firma], map: "idx_firma_hash")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model gastos_orden {
  id_gasto                                       Int                           @id @default(autoincrement())
  id_orden_servicio                              Int
  tipo_gasto                                     tipo_gasto_enum
  descripcion                                    String                        @db.VarChar(300)
  justificacion                                  String
  valor                                          Decimal                       @db.Decimal(12, 2)
  tiene_comprobante                              Boolean?                      @default(false)
  numero_comprobante                             String?                       @db.VarChar(100)
  proveedor                                      String?                       @db.VarChar(200)
  ruta_comprobante                               String?                       @db.VarChar(500)
  requiere_aprobacion                            Boolean?                      @default(false)
  aprobado_por                                   Int?
  fecha_aprobacion                               DateTime?                     @db.Timestamp(6)
  estado_aprobacion                              estado_aprobacion_gasto_enum? @default(APROBADO)
  observaciones_aprobacion                       String?
  fecha_gasto                                    DateTime?                     @default(now()) @db.Timestamp(6)
  generado_por                                   Int?
  observaciones                                  String?
  fecha_registro                                 DateTime?                     @default(now()) @db.Timestamp(6)
  registrado_por                                 Int?
  fecha_modificacion                             DateTime?                     @db.Timestamp(6)
  modificado_por                                 Int?
  usuarios_gastos_orden_aprobado_porTousuarios   usuarios?                     @relation("gastos_orden_aprobado_porTousuarios", fields: [aprobado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  empleados                                      empleados?                    @relation(fields: [generado_por], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)
  ordenes_servicio                               ordenes_servicio              @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)
  usuarios_gastos_orden_modificado_porTousuarios usuarios?                     @relation("gastos_orden_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  usuarios_gastos_orden_registrado_porTousuarios usuarios?                     @relation("gastos_orden_registrado_porTousuarios", fields: [registrado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([fecha_gasto(sort: Desc)], map: "idx_gastos_fecha")
  @@index([id_orden_servicio], map: "idx_gastos_orden")
  @@index([id_orden_servicio, tipo_gasto], map: "idx_gastos_orden_tipo")
  @@index([generado_por], map: "idx_gastos_tecnico")
  @@index([tipo_gasto], map: "idx_gastos_tipo")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model historial_contrato {
  id_historial            Int                     @id @default(autoincrement())
  id_contrato             Int
  campo_modificado        String                  @db.VarChar(50)
  valor_anterior          String?
  valor_nuevo             String
  motivo_cambio           String?
  fecha_cambio            DateTime                @default(now()) @db.Timestamp(6)
  modificado_por          Int
  contratos_mantenimiento contratos_mantenimiento @relation(fields: [id_contrato], references: [id_contrato], onDelete: Cascade, onUpdate: NoAction, map: "fk_historial_contrato")
  usuarios                usuarios                @relation(fields: [modificado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_historial_modificado_por")

  @@index([id_contrato, fecha_cambio(sort: Desc)], map: "idx_historial_contrato")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model historial_envios {
  id_envio              Int                    @id @default(autoincrement())
  tipo_documento        String                 @db.VarChar(20)
  id_cotizacion         Int?
  id_propuesta          Int?
  fecha_envio           DateTime?              @default(now()) @db.Timestamp(6)
  enviado_por           Int
  canal_envio           String?                @default("EMAIL") @db.VarChar(50)
  destinatario_email    String                 @db.VarChar(255)
  destinatario_nombre   String?                @db.VarChar(200)
  emails_copia          String[]               @db.VarChar(500)
  asunto_email          String?                @db.VarChar(500)
  cuerpo_email          String?
  ruta_pdf_generado     String?                @db.VarChar(500)
  tama_o_pdf_bytes      BigInt?                @map("tamaÃ±o_pdf_bytes")
  hash_pdf_sha256       String?                @db.VarChar(64)
  archivos_adjuntos     Json?
  estado_envio          String?                @default("ENVIADO") @db.VarChar(50)
  mensaje_error         String?
  id_mensaje_externo    String?                @db.VarChar(255)
  email_abierto         Boolean?               @default(false)
  fecha_apertura        DateTime?              @db.Timestamp(6)
  contador_aperturas    Int?                   @default(0)
  ip_apertura           String?                @db.VarChar(45)
  user_agent_apertura   String?                @db.VarChar(500)
  metadata              Json?
  usuarios              usuarios               @relation(fields: [enviado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  cotizaciones          cotizaciones?          @relation(fields: [id_cotizacion], references: [id_cotizacion], onDelete: NoAction, onUpdate: NoAction)
  propuestas_correctivo propuestas_correctivo? @relation(fields: [id_propuesta], references: [id_propuesta], onDelete: NoAction, onUpdate: NoAction)

  @@index([destinatario_email], map: "idx_envios_destinatario")
  @@index([fecha_envio(sort: Desc)], map: "idx_envios_fecha")
  @@index([enviado_por, fecha_envio(sort: Desc)], map: "idx_envios_usuario")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model historial_estados_equipo {
  id_historial    Int                 @id @default(autoincrement())
  id_equipo       Int
  estado_anterior estado_equipo_enum?
  estado_nuevo    estado_equipo_enum
  fecha_cambio    DateTime?           @default(now()) @db.Timestamp(6)
  motivo_cambio   String?             @db.VarChar(500)
  cambiado_por    Int
  contexto        Json?
  equipos         equipos             @relation(fields: [id_equipo], references: [id_equipo], onDelete: Cascade, onUpdate: NoAction, map: "fk_historial_equipo")
  usuarios        usuarios            @relation(fields: [cambiado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_historial_usuario")

  @@index([id_equipo, fecha_cambio(sort: Desc)], map: "idx_historial_equipo_fecha")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model historial_estados_orden {
  id_historial                                                            Int              @id @default(autoincrement())
  id_orden_servicio                                                       Int
  id_estado_anterior                                                      Int?
  id_estado_nuevo                                                         Int
  motivo_cambio                                                           String?
  observaciones                                                           String?
  accion                                                                  String?          @db.VarChar(100)
  fecha_cambio                                                            DateTime         @default(now()) @db.Timestamp(6)
  realizado_por                                                           Int
  ip_origen                                                               String?          @db.VarChar(45)
  user_agent                                                              String?          @db.VarChar(500)
  duracion_estado_anterior_minutos                                        Int?
  metadata                                                                Json?
  estados_orden_historial_estados_orden_id_estado_anteriorToestados_orden estados_orden?   @relation("historial_estados_orden_id_estado_anteriorToestados_orden", fields: [id_estado_anterior], references: [id_estado], onDelete: NoAction, onUpdate: NoAction)
  estados_orden_historial_estados_orden_id_estado_nuevoToestados_orden    estados_orden    @relation("historial_estados_orden_id_estado_nuevoToestados_orden", fields: [id_estado_nuevo], references: [id_estado], onDelete: NoAction, onUpdate: NoAction)
  ordenes_servicio                                                        ordenes_servicio @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)
  usuarios                                                                usuarios         @relation(fields: [realizado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([id_estado_nuevo, fecha_cambio(sort: Desc)], map: "idx_historial_estado_nuevo")
  @@index([fecha_cambio(sort: Desc)], map: "idx_historial_fecha")
  @@index([id_orden_servicio, fecha_cambio(sort: Desc)], map: "idx_historial_orden_fecha")
  @@index([realizado_por, fecha_cambio(sort: Desc)], map: "idx_historial_usuario")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model informes {
  id_informe                               Int                   @id @default(autoincrement())
  numero_informe                           String                @unique @db.VarChar(50)
  id_orden_servicio                        Int
  id_plantilla_informe                     Int?
  fecha_generacion                         DateTime              @default(now()) @db.Timestamp(6)
  generado_por                             Int
  estado_informe                           estado_informe_enum   @default(BORRADOR)
  revisado_por                             Int?
  fecha_revision                           DateTime?             @db.Timestamp(6)
  observaciones_revision                   String?
  aprobado_por                             Int?
  fecha_aprobacion                         DateTime?             @db.Timestamp(6)
  id_documento_pdf                         Int?
  cliente_visualizo                        Boolean               @default(false)
  fecha_visualizacion_cliente              DateTime?             @db.Timestamp(6)
  cliente_aprobo                           Boolean               @default(false)
  fecha_aprobacion_cliente                 DateTime?             @db.Timestamp(6)
  firma_digital_cliente                    String?
  observaciones                            String?
  bitacoras_informes                       bitacoras_informes[]
  usuarios_informes_aprobado_porTousuarios usuarios?             @relation("informes_aprobado_porTousuarios", fields: [aprobado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_informe_aprobado_por")
  documentos_generados                     documentos_generados? @relation(fields: [id_documento_pdf], references: [id_documento], onUpdate: NoAction, map: "fk_informe_documento_pdf")
  usuarios_informes_generado_porTousuarios usuarios              @relation("informes_generado_porTousuarios", fields: [generado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_informe_generado_por")
  ordenes_servicio                         ordenes_servicio      @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: SetNull, onUpdate: NoAction, map: "fk_informe_orden_servicio")
  plantillas_informe                       plantillas_informe?   @relation(fields: [id_plantilla_informe], references: [id_plantilla_informe], onUpdate: NoAction, map: "fk_informe_plantilla")
  usuarios_informes_revisado_porTousuarios usuarios?             @relation("informes_revisado_porTousuarios", fields: [revisado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_informe_revisado_por")

  @@index([estado_informe], map: "idx_informes_estado")
  @@index([fecha_generacion(sort: Desc)], map: "idx_informes_fecha_generacion")
  @@index([id_orden_servicio], map: "idx_informes_orden_servicio")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model items_cotizacion_componentes {
  id_item_componente     Int                   @id @default(autoincrement())
  id_cotizacion          Int
  id_componente          Int?
  id_tipo_componente     Int
  descripcion            String                @db.VarChar(300)
  referencia_manual      String?               @db.VarChar(100)
  marca_manual           String?               @db.VarChar(100)
  cantidad               Decimal               @default(1) @db.Decimal(10, 2)
  unidad                 String?               @default("unidad") @db.VarChar(20)
  precio_unitario        Decimal               @db.Decimal(12, 2)
  descuento_porcentaje   Decimal?              @default(0) @db.Decimal(5, 2)
  subtotal               Decimal?              @db.Decimal(12, 2)
  garantia_meses         Int?
  observaciones_garantia String?
  observaciones          String?
  orden_item             Int?
  fecha_registro         DateTime?             @default(now()) @db.Timestamp(6)
  registrado_por         Int?
  catalogo_componentes   catalogo_componentes? @relation(fields: [id_componente], references: [id_componente], onDelete: NoAction, onUpdate: NoAction)
  cotizaciones           cotizaciones          @relation(fields: [id_cotizacion], references: [id_cotizacion], onDelete: Cascade, onUpdate: NoAction)
  tipos_componente       tipos_componente      @relation(fields: [id_tipo_componente], references: [id_tipo_componente], onDelete: NoAction, onUpdate: NoAction)
  usuarios               usuarios?             @relation(fields: [registrado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([id_cotizacion, orden_item], map: "idx_items_comp_cotizacion")
  @@index([id_tipo_componente], map: "idx_items_comp_tipo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model items_cotizacion_servicios {
  id_item_servicio          Int                @id @default(autoincrement())
  id_cotizacion             Int
  id_servicio               Int
  cantidad                  Decimal            @default(1) @db.Decimal(10, 2)
  unidad                    String?            @default("servicio") @db.VarChar(20)
  precio_unitario           Decimal            @db.Decimal(12, 2)
  descuento_porcentaje      Decimal?           @default(0) @db.Decimal(5, 2)
  subtotal                  Decimal?           @db.Decimal(12, 2)
  descripcion_personalizada String?
  observaciones             String?
  justificacion_precio      String?
  orden_item                Int?
  fecha_registro            DateTime?          @default(now()) @db.Timestamp(6)
  registrado_por            Int?
  cotizaciones              cotizaciones       @relation(fields: [id_cotizacion], references: [id_cotizacion], onDelete: Cascade, onUpdate: NoAction)
  catalogo_servicios        catalogo_servicios @relation(fields: [id_servicio], references: [id_servicio], onDelete: NoAction, onUpdate: NoAction)
  usuarios                  usuarios?          @relation(fields: [registrado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([id_cotizacion, orden_item], map: "idx_items_serv_cotizacion")
  @@index([id_servicio, precio_unitario], map: "idx_items_serv_precios")
  @@index([id_servicio], map: "idx_items_serv_servicio")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model items_propuesta {
  id_item_propuesta     Int                   @id @default(autoincrement())
  id_propuesta          Int
  tipo_item             String                @db.VarChar(20)
  id_servicio           Int?
  id_componente         Int?
  id_tipo_componente    Int?
  descripcion           String                @db.VarChar(300)
  cantidad              Decimal               @default(1) @db.Decimal(10, 2)
  unidad                String?               @default("unidad") @db.VarChar(20)
  precio_unitario       Decimal               @db.Decimal(12, 2)
  descuento_porcentaje  Decimal?              @default(0) @db.Decimal(5, 2)
  subtotal              Decimal?              @db.Decimal(12, 2)
  observaciones         String?
  orden_item            Int?
  fecha_registro        DateTime?             @default(now()) @db.Timestamp(6)
  catalogo_componentes  catalogo_componentes? @relation(fields: [id_componente], references: [id_componente], onDelete: NoAction, onUpdate: NoAction)
  propuestas_correctivo propuestas_correctivo @relation(fields: [id_propuesta], references: [id_propuesta], onDelete: Cascade, onUpdate: NoAction)
  catalogo_servicios    catalogo_servicios?   @relation(fields: [id_servicio], references: [id_servicio], onDelete: NoAction, onUpdate: NoAction)
  tipos_componente      tipos_componente?     @relation(fields: [id_tipo_componente], references: [id_tipo_componente], onDelete: NoAction, onUpdate: NoAction)

  @@index([id_propuesta, orden_item], map: "idx_items_prop_propuesta")
  @@index([tipo_item], map: "idx_items_prop_tipo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model lecturas_horometro {
  id_lectura          Int                          @id @default(autoincrement())
  id_equipo           Int
  horas_lectura       Decimal                      @db.Decimal(10, 2)
  fecha_lectura       DateTime                     @default(now()) @db.Timestamp(6)
  id_orden_servicio   Int?
  tipo_lectura        tipo_lectura_horometro_enum? @default(MANTENIMIENTO)
  horas_transcurridas Decimal?                     @db.Decimal(10, 2)
  dias_transcurridos  Int?
  horas_promedio_dia  Decimal?                     @db.Decimal(10, 2)
  observaciones       String?
  registrado_por      Int
  equipos             equipos                      @relation(fields: [id_equipo], references: [id_equipo], onDelete: Cascade, onUpdate: NoAction, map: "fk_lectura_equipo")
  usuarios            usuarios                     @relation(fields: [registrado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_lectura_usuario")

  @@index([id_equipo, fecha_lectura(sort: Desc)], map: "idx_lecturas_equipo_fecha")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model lotes_componentes {
  id_lote                  Int                      @id @default(autoincrement())
  codigo_lote              String                   @unique @db.VarChar(50)
  id_componente            Int
  fecha_fabricacion        DateTime?                @db.Date
  fecha_vencimiento        DateTime?                @db.Date
  cantidad_inicial         Decimal                  @db.Decimal(10, 2)
  cantidad_actual          Decimal                  @db.Decimal(10, 2)
  estado_lote              estado_lote_enum         @default(DISPONIBLE)
  id_proveedor             Int?
  numero_factura_proveedor String?                  @db.VarChar(100)
  observaciones            String?
  fecha_ingreso            DateTime                 @default(now()) @db.Timestamp(6)
  ingresado_por            Int
  alertas_stock            alertas_stock[]
  devoluciones_proveedor   devoluciones_proveedor[]
  catalogo_componentes     catalogo_componentes     @relation(fields: [id_componente], references: [id_componente], onUpdate: NoAction, map: "fk_lote_componente")
  usuarios                 usuarios                 @relation(fields: [ingresado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_lote_ingresado_por")
  proveedores              proveedores?             @relation(fields: [id_proveedor], references: [id_proveedor], onUpdate: NoAction, map: "fk_lote_proveedor")
  movimientos_inventario   movimientos_inventario[]

  @@index([id_componente, estado_lote], map: "idx_lote_componente")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model mediciones_servicio {
  id_medicion           Int                 @id @default(autoincrement())
  id_orden_servicio     Int
  id_parametro_medicion Int
  valor_numerico        Decimal?            @db.Decimal(12, 2)
  valor_texto           String?
  unidad_medida         String?             @db.VarChar(20)
  fuera_de_rango        Boolean?
  nivel_alerta          nivel_alerta_enum?
  mensaje_alerta        String?
  observaciones         String?
  temperatura_ambiente  Decimal?            @db.Decimal(5, 2)
  humedad_relativa      Decimal?            @db.Decimal(5, 2)
  fecha_medicion        DateTime?           @default(now()) @db.Timestamp(6)
  medido_por            Int?
  instrumento_medicion  String?             @db.VarChar(200)
  fecha_registro        DateTime?           @default(now()) @db.Timestamp(6)
  id_orden_equipo       Int?
  ordenes_equipos       ordenes_equipos?    @relation(fields: [id_orden_equipo], references: [id_orden_equipo], onUpdate: NoAction)
  ordenes_servicio      ordenes_servicio    @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)
  parametros_medicion   parametros_medicion @relation(fields: [id_parametro_medicion], references: [id_parametro_medicion], onDelete: NoAction, onUpdate: NoAction)
  empleados             empleados?          @relation(fields: [medido_por], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)

  @@index([fecha_medicion(sort: Desc)], map: "idx_mediciones_fecha")
  @@index([id_orden_servicio], map: "idx_mediciones_orden")
  @@index([id_parametro_medicion], map: "idx_mediciones_parametro")
  @@index([medido_por], map: "idx_mediciones_tecnico")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model motivos_ajuste {
  id_motivo_ajuste                 Int                          @id @default(autoincrement())
  codigo_motivo                    String                       @unique @db.VarChar(30)
  nombre_motivo                    String                       @db.VarChar(100)
  categoria                        categoria_motivo_ajuste_enum
  requiere_justificacion_detallada Boolean                      @default(true)
  requiere_aprobacion_gerencia     Boolean                      @default(false)
  activo                           Boolean                      @default(true)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model motivos_rechazo {
  id_motivo_rechazo     Int                     @id @default(autoincrement())
  codigo_motivo         String                  @unique @db.VarChar(30)
  nombre_motivo         String                  @db.VarChar(100)
  descripcion           String?
  requiere_observacion  Boolean?                @default(false)
  categoria             String                  @default("INTERNO") @db.VarChar(50)
  color_hex             String?                 @db.VarChar(7)
  icono                 String?                 @db.VarChar(50)
  orden_visualizacion   Int                     @default(999)
  activo                Boolean?                @default(true)
  observaciones         String?
  fecha_creacion        DateTime?               @default(now()) @db.Timestamp(6)
  cotizaciones          cotizaciones[]
  propuestas_correctivo propuestas_correctivo[]

  @@index([categoria], map: "idx_motivos_rechazo_categoria")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model movimientos_inventario {
  id_movimiento                                           Int                               @id @default(autoincrement())
  tipo_movimiento                                         tipo_movimiento_inventario_enum
  origen_movimiento                                       origen_movimiento_inventario_enum
  id_componente                                           Int
  cantidad                                                Decimal                           @db.Decimal(10, 2)
  costo_unitario                                          Decimal?                          @db.Decimal(12, 2)
  id_ubicacion                                            Int?
  id_lote                                                 Int?
  id_orden_servicio                                       Int?
  id_orden_compra                                         Int?
  id_remision                                             Int?
  justificacion                                           String?
  observaciones                                           String?
  fecha_movimiento                                        DateTime                          @default(now()) @db.Timestamp(6)
  realizado_por                                           Int
  aprobado_por                                            Int?
  usuarios_movimientos_inventario_aprobado_porTousuarios  usuarios?                         @relation("movimientos_inventario_aprobado_porTousuarios", fields: [aprobado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_mov_aprobado_por")
  catalogo_componentes                                    catalogo_componentes              @relation(fields: [id_componente], references: [id_componente], onUpdate: NoAction, map: "fk_mov_componente")
  lotes_componentes                                       lotes_componentes?                @relation(fields: [id_lote], references: [id_lote], onUpdate: NoAction, map: "fk_mov_lote")
  ordenes_compra                                          ordenes_compra?                   @relation(fields: [id_orden_compra], references: [id_orden_compra], onDelete: Restrict, onUpdate: NoAction, map: "fk_mov_orden_compra")
  ordenes_servicio                                        ordenes_servicio?                 @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Restrict, onUpdate: NoAction, map: "fk_mov_orden_servicio")
  usuarios_movimientos_inventario_realizado_porTousuarios usuarios                          @relation("movimientos_inventario_realizado_porTousuarios", fields: [realizado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_mov_realizado_por")
  remisiones                                              remisiones?                       @relation(fields: [id_remision], references: [id_remision], onDelete: Restrict, onUpdate: NoAction, map: "fk_mov_remision")
  ubicaciones_bodega                                      ubicaciones_bodega?               @relation(fields: [id_ubicacion], references: [id_ubicacion], onUpdate: NoAction, map: "fk_mov_ubicacion")

  @@index([id_componente, fecha_movimiento(sort: Desc)], map: "idx_mov_componente_fecha")
  @@index([tipo_movimiento, origen_movimiento], map: "idx_mov_tipo_origen")
}

model notificaciones {
  id_notificacion          Int       @id @default(autoincrement())
  id_usuario               Int
  tipo_notificacion        String    @db.VarChar(50)
  titulo                   String    @db.VarChar(200)
  mensaje                  String
  prioridad                String    @default("NORMAL") @db.VarChar(20)
  leida                    Boolean   @default(false)
  fecha_creacion           DateTime  @default(now()) @db.Timestamp(6)
  fecha_lectura            DateTime? @db.Timestamp(6)
  id_entidad_relacionada   Int?
  tipo_entidad_relacionada String?   @db.VarChar(50)
  url_accion               String?   @db.VarChar(500)
  datos_extra              String?
  usuarios                 usuarios  @relation(fields: [id_usuario], references: [id_usuario], onDelete: Cascade, onUpdate: NoAction)

  @@index([tipo_notificacion], map: "idx_notificaciones_tipo")
  @@index([id_usuario, fecha_creacion(sort: Desc)], map: "idx_notificaciones_usuario_fecha")
  @@index([id_usuario, leida], map: "idx_notificaciones_usuario_leida")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ordenes_actividades_plan {
  id_orden_actividad_plan Int                         @id @default(autoincrement())
  id_orden_servicio       Int
  id_actividad_catalogo   Int
  orden_secuencia         Int?                        @default(1)
  origen                  origen_actividad_plan_enum? @default(ADMIN)
  es_obligatoria          Boolean?                    @default(true)
  creado_por              Int?
  fecha_creacion          DateTime?                   @default(now()) @db.Timestamp(6)
  modificado_por          Int?
  fecha_modificacion      DateTime?                   @db.Timestamp(6)
  catalogo_actividades    catalogo_actividades        @relation(fields: [id_actividad_catalogo], references: [id_actividad_catalogo], onUpdate: NoAction, map: "fk_plan_actividad")
  ordenes_servicio        ordenes_servicio            @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction, map: "fk_plan_orden")

  @@unique([id_orden_servicio, id_actividad_catalogo], map: "uk_plan_orden_actividad")
  @@index([id_orden_servicio, orden_secuencia], map: "idx_plan_orden_secuencia")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ordenes_compra {
  id_orden_compra                                  Int                      @id @default(autoincrement())
  numero_orden_compra                              String                   @unique @db.VarChar(50)
  id_proveedor                                     Int
  fecha_solicitud                                  DateTime                 @default(dbgenerated("CURRENT_DATE")) @db.Date
  fecha_necesidad                                  DateTime?                @db.Date
  estado                                           estado_orden_compra_enum @default(BORRADOR)
  observaciones                                    String?
  solicitada_por                                   Int
  aprobada_por                                     Int?
  fecha_aprobacion                                 DateTime?                @db.Timestamp(6)
  devoluciones_proveedor                           devoluciones_proveedor[]
  movimientos_inventario                           movimientos_inventario[]
  usuarios_ordenes_compra_aprobada_porTousuarios   usuarios?                @relation("ordenes_compra_aprobada_porTousuarios", fields: [aprobada_por], references: [id_usuario], onUpdate: NoAction, map: "fk_orden_compra_aprobada_por")
  proveedores                                      proveedores              @relation(fields: [id_proveedor], references: [id_proveedor], onUpdate: NoAction, map: "fk_orden_compra_proveedor")
  usuarios_ordenes_compra_solicitada_porTousuarios usuarios                 @relation("ordenes_compra_solicitada_porTousuarios", fields: [solicitada_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_orden_compra_solicitada_por")
  ordenes_compra_detalle                           ordenes_compra_detalle[]
  recepciones_compra                               recepciones_compra[]

  @@index([estado, fecha_solicitud(sort: Desc)], map: "idx_orden_compra_estado")
  @@index([id_proveedor, estado], map: "idx_orden_compra_proveedor")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ordenes_compra_detalle {
  id_detalle           Int                  @id @default(autoincrement())
  id_orden_compra      Int
  id_componente        Int
  cantidad             Decimal              @db.Decimal(10, 2)
  precio_unitario      Decimal              @db.Decimal(12, 2)
  subtotal             Decimal?             @default(dbgenerated("(cantidad * precio_unitario)")) @db.Decimal(12, 2)
  observaciones        String?
  catalogo_componentes catalogo_componentes @relation(fields: [id_componente], references: [id_componente], onUpdate: NoAction, map: "fk_orden_det_componente")
  ordenes_compra       ordenes_compra       @relation(fields: [id_orden_compra], references: [id_orden_compra], onDelete: Cascade, onUpdate: NoAction, map: "fk_orden_det_orden_compra")
  recepciones_compra   recepciones_compra[]

  @@index([id_componente], map: "idx_orden_det_componente")
  @@index([id_orden_compra], map: "idx_orden_det_orden_compra")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains an index with non-default null sort order and requires additional setup for migrations. Visit https://pris.ly/d/default-index-null-ordering for more info.
model ordenes_servicio {
  id_orden_servicio                                                                        Int                        @id @default(autoincrement())
  numero_orden                                                                             String                     @unique @db.VarChar(50)
  id_cliente                                                                               Int
  id_sede                                                                                  Int?
  id_equipo                                                                                Int
  id_tipo_servicio                                                                         Int?
  id_cronograma                                                                            Int?
  fecha_programada                                                                         DateTime?                  @db.Date
  hora_programada                                                                          DateTime?                  @db.Time(6)
  prioridad                                                                                prioridad_enum?            @default(NORMAL)
  origen_solicitud                                                                         origen_solicitud_enum?     @default(PROGRAMADO)
  id_tecnico_asignado                                                                      Int?
  id_supervisor                                                                            Int?
  fecha_asignacion                                                                         DateTime?                  @db.Timestamp(6)
  fecha_inicio_real                                                                        DateTime?                  @db.Timestamp(6)
  fecha_fin_real                                                                           DateTime?                  @db.Timestamp(6)
  duracion_minutos                                                                         Int?
  id_estado_actual                                                                         Int
  fecha_cambio_estado                                                                      DateTime?                  @default(now()) @db.Timestamp(6)
  requiere_firma_cliente                                                                   Boolean?                   @default(true)
  id_firma_cliente                                                                         Int?
  id_firma_tecnico                                                                         Int?
  nombre_quien_recibe                                                                      String?                    @db.VarChar(200)
  cargo_quien_recibe                                                                       String?                    @db.VarChar(100)
  cliente_conforme                                                                         Boolean?
  calificacion_cliente                                                                     Int?
  descripcion_inicial                                                                      String?
  trabajo_realizado                                                                        String?
  observaciones_tecnico                                                                    String?
  observaciones_cierre                                                                     String?
  tiene_garantia                                                                           Boolean?                   @default(false)
  meses_garantia                                                                           Int?
  fecha_vencimiento_garantia                                                               DateTime?                  @db.Date
  observaciones_garantia                                                                   String?
  aprobada_por                                                                             Int?
  fecha_aprobacion                                                                         DateTime?                  @db.Timestamp(6)
  total_servicios                                                                          Decimal?                   @default(0) @db.Decimal(12, 2)
  total_gastos                                                                             Decimal?                   @default(0) @db.Decimal(12, 2)
  total_componentes                                                                        Decimal?                   @default(0) @db.Decimal(12, 2)
  total_general                                                                            Decimal?                   @default(0) @db.Decimal(12, 2)
  metadata                                                                                 Json?
  creado_por                                                                               Int
  fecha_creacion                                                                           DateTime?                  @default(now()) @db.Timestamp(6)
  modificado_por                                                                           Int?
  fecha_modificacion                                                                       DateTime?                  @db.Timestamp(6)
  actividades_ejecutadas                                                                   actividades_ejecutadas[]
  componentes_usados                                                                       componentes_usados[]
  cotizaciones                                                                             cotizaciones[]
  cronogramas_servicio                                                                     cronogramas_servicio[]
  detalle_servicios_orden                                                                  detalle_servicios_orden[]
  evidencias_fotograficas                                                                  evidencias_fotograficas[]
  gastos_orden                                                                             gastos_orden[]
  historial_estados_orden                                                                  historial_estados_orden[]
  informes                                                                                 informes[]
  mediciones_servicio                                                                      mediciones_servicio[]
  movimientos_inventario                                                                   movimientos_inventario[]
  ordenes_actividades_plan                                                                 ordenes_actividades_plan[]
  ordenes_equipos                                                                          ordenes_equipos[]
  firmas_digitales_ordenes_servicio_id_firma_tecnicoTofirmas_digitales                     firmas_digitales?          @relation("ordenes_servicio_id_firma_tecnicoTofirmas_digitales", fields: [id_firma_tecnico], references: [id_firma_digital], map: "fk_orden_firma_tecnico")
  usuarios_ordenes_servicio_aprobada_porTousuarios                                         usuarios?                  @relation("ordenes_servicio_aprobada_porTousuarios", fields: [aprobada_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  usuarios_ordenes_servicio_creado_porTousuarios                                           usuarios                   @relation("ordenes_servicio_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  clientes                                                                                 clientes                   @relation(fields: [id_cliente], references: [id_cliente], onDelete: NoAction, onUpdate: NoAction)
  equipos                                                                                  equipos                    @relation(fields: [id_equipo], references: [id_equipo], onDelete: NoAction, onUpdate: NoAction)
  estados_orden                                                                            estados_orden              @relation(fields: [id_estado_actual], references: [id_estado], onDelete: NoAction, onUpdate: NoAction)
  firmas_digitales                                                                         firmas_digitales?          @relation(fields: [id_firma_cliente], references: [id_firma_digital], onDelete: NoAction, onUpdate: NoAction)
  sedes_cliente                                                                            sedes_cliente?             @relation(fields: [id_sede], references: [id_sede], onDelete: NoAction, onUpdate: NoAction)
  empleados_ordenes_servicio_id_supervisorToempleados                                      empleados?                 @relation("ordenes_servicio_id_supervisorToempleados", fields: [id_supervisor], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)
  empleados_ordenes_servicio_id_tecnico_asignadoToempleados                                empleados?                 @relation("ordenes_servicio_id_tecnico_asignadoToempleados", fields: [id_tecnico_asignado], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)
  tipos_servicio                                                                           tipos_servicio?            @relation(fields: [id_tipo_servicio], references: [id_tipo_servicio], onDelete: NoAction, onUpdate: NoAction)
  usuarios_ordenes_servicio_modificado_porTousuarios                                       usuarios?                  @relation("ordenes_servicio_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  propuestas_correctivo_propuestas_correctivo_id_orden_servicioToordenes_servicio          propuestas_correctivo[]    @relation("propuestas_correctivo_id_orden_servicioToordenes_servicio")
  propuestas_correctivo_propuestas_correctivo_id_orden_servicio_generadaToordenes_servicio propuestas_correctivo[]    @relation("propuestas_correctivo_id_orden_servicio_generadaToordenes_servicio")
  remisiones                                                                               remisiones[]

  @@index([id_cliente, fecha_programada(sort: Desc)], map: "idx_os_cliente_fecha")
  @@index([id_equipo, fecha_programada(sort: Desc)], map: "idx_os_equipo_fecha")
  @@index([id_estado_actual, fecha_programada], map: "idx_os_estados_activos")
  @@index([id_tecnico_asignado, id_estado_actual], map: "idx_os_tecnico_estado")
  @@index([id_cliente, id_estado_actual], map: "idx_ordenes_cliente_estado")
  @@index([id_estado_actual, fecha_programada(sort: Desc)], map: "idx_ordenes_estado_fecha")
  @@index([fecha_creacion(sort: Desc)], map: "idx_ordenes_fecha_creacion")
  @@index([id_firma_tecnico], map: "idx_ordenes_firma_tecnico")
  @@index([prioridad, id_estado_actual], map: "idx_ordenes_prioridad_estado")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model parametros_medicion {
  id_parametro_medicion                                 Int                       @id @default(autoincrement())
  codigo_parametro                                      String                    @unique @db.VarChar(50)
  nombre_parametro                                      String                    @db.VarChar(100)
  descripcion                                           String?
  unidad_medida                                         String                    @db.VarChar(20)
  tipo_dato                                             tipo_dato_parametro_enum? @default(NUMERICO)
  valor_minimo_normal                                   Decimal?                  @db.Decimal(10, 2)
  valor_maximo_normal                                   Decimal?                  @db.Decimal(10, 2)
  valor_minimo_critico                                  Decimal?                  @db.Decimal(10, 2)
  valor_maximo_critico                                  Decimal?                  @db.Decimal(10, 2)
  valor_ideal                                           Decimal?                  @db.Decimal(10, 2)
  categoria                                             categoria_parametro_enum
  id_tipo_equipo                                        Int?
  es_critico_seguridad                                  Boolean?                  @default(false)
  es_obligatorio                                        Boolean?                  @default(false)
  decimales_precision                                   Int?                      @default(2)
  activo                                                Boolean?                  @default(true)
  observaciones                                         String?
  creado_por                                            Int?
  fecha_creacion                                        DateTime?                 @default(now()) @db.Timestamp(6)
  modificado_por                                        Int?
  fecha_modificacion                                    DateTime?                 @db.Timestamp(6)
  catalogo_actividades                                  catalogo_actividades[]
  mediciones_servicio                                   mediciones_servicio[]
  usuarios_parametros_medicion_creado_porTousuarios     usuarios?                 @relation("parametros_medicion_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  tipos_equipo                                          tipos_equipo?             @relation(fields: [id_tipo_equipo], references: [id_tipo_equipo], onDelete: NoAction, onUpdate: NoAction)
  usuarios_parametros_medicion_modificado_porTousuarios usuarios?                 @relation("parametros_medicion_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([categoria], map: "idx_parametros_categoria")
  @@index([id_tipo_equipo], map: "idx_parametros_equipo")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model permisos {
  id_permiso     Int              @id @default(autoincrement())
  codigo_permiso String           @unique @db.VarChar(100)
  nombre_permiso String           @db.VarChar(200)
  descripcion    String?
  modulo         String           @db.VarChar(50)
  activo         Boolean?         @default(true)
  observaciones  String?
  fecha_creacion DateTime?        @default(now()) @db.Timestamp(6)
  creado_por     Int?
  usuarios       usuarios?        @relation(fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_permisos_creado_por")
  roles_permisos roles_permisos[]

  @@index([codigo_permiso], map: "idx_permisos_codigo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model personas {
  id_persona             Int                      @id @default(autoincrement())
  tipo_identificacion    tipo_identificacion_enum
  numero_identificacion  String                   @db.VarChar(20)
  tipo_persona           tipo_persona_enum
  primer_nombre          String?                  @db.VarChar(50)
  segundo_nombre         String?                  @db.VarChar(50)
  primer_apellido        String?                  @db.VarChar(50)
  segundo_apellido       String?                  @db.VarChar(50)
  nombre_completo        String?                  @default(dbgenerated("\nCASE\n    WHEN (tipo_persona = 'NATURAL'::tipo_persona_enum) THEN (TRIM(BOTH FROM (((COALESCE(((primer_nombre)::text || ' '::text), ''::text) || COALESCE(((segundo_nombre)::text || ' '::text), ''::text)) || COALESCE(((primer_apellido)::text || ' '::text), ''::text)) || (COALESCE(segundo_apellido, ''::character varying))::text)))::character varying\n    ELSE razon_social\nEND"))
  razon_social           String?                  @db.VarChar(200)
  nombre_comercial       String?                  @db.VarChar(200)
  representante_legal    String?                  @db.VarChar(200)
  cedula_representante   String?                  @db.VarChar(20)
  email_principal        String?                  @db.VarChar(150)
  telefono_principal     String?                  @db.VarChar(20)
  telefono_secundario    String?                  @db.VarChar(20)
  celular                String?                  @db.VarChar(20)
  direccion_principal    String?                  @db.VarChar(300)
  barrio_zona            String?                  @db.VarChar(100)
  ciudad                 String                   @default("CARTAGENA") @db.VarChar(100)
  departamento           String?                  @default("BOLÃVAR") @db.VarChar(100)
  pais                   String?                  @default("COLOMBIA") @db.VarChar(100)
  fecha_nacimiento       DateTime?                @db.Date
  es_cliente             Boolean?                 @default(false)
  es_proveedor           Boolean?                 @default(false)
  es_empleado            Boolean?                 @default(false)
  es_contratista         Boolean?                 @default(false)
  ruta_foto              String?                  @db.VarChar(500)
  observaciones          String?
  activo                 Boolean?                 @default(true)
  creado_por             Int?
  fecha_creacion         DateTime?                @default(now()) @db.Timestamp(6)
  modificado_por         Int?
  fecha_modificacion     DateTime?                @db.Timestamp(6)
  clientes               clientes?
  contactos_adicionales  contactos_adicionales[]
  empleados              empleados?
  firmas_administrativas firmas_administrativas?
  firmas_digitales       firmas_digitales[]
  proveedores            proveedores?
  usuarios               usuarios?

  @@unique([tipo_identificacion, numero_identificacion], map: "uk_identificacion")
  @@index([numero_identificacion], map: "idx_personas_identificacion")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model plantillas_informe {
  id_plantilla_informe                                 Int             @id @default(autoincrement())
  nombre_plantilla                                     String          @db.VarChar(100)
  id_tipo_servicio                                     Int?
  texto_introduccion                                   String?
  configuracion_secciones                              Json
  activa                                               Boolean         @default(true)
  creado_por                                           Int?
  fecha_creacion                                       DateTime        @default(now()) @db.Timestamp(6)
  modificado_por                                       Int?
  fecha_modificacion                                   DateTime?       @db.Timestamp(6)
  informes                                             informes[]
  usuarios_plantillas_informe_creado_porTousuarios     usuarios?       @relation("plantillas_informe_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_plantilla_creado_por")
  usuarios_plantillas_informe_modificado_porTousuarios usuarios?       @relation("plantillas_informe_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_plantilla_modificado_por")
  tipos_servicio                                       tipos_servicio? @relation(fields: [id_tipo_servicio], references: [id_tipo_servicio], onUpdate: NoAction, map: "fk_plantilla_tipo_servicio")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model propuestas_correctivo {
  id_propuesta                                                                        Int                       @id @default(autoincrement())
  numero_propuesta                                                                    String                    @unique @db.VarChar(50)
  id_orden_servicio                                                                   Int
  id_cliente                                                                          Int
  id_equipo                                                                           Int?
  descripcion_problema                                                                String
  solucion_propuesta                                                                  String
  categoria                                                                           categoria_propuesta_enum? @default(CORRECTIVO)
  prioridad                                                                           prioridad_enum?           @default(NORMAL)
  id_estado                                                                           Int
  fecha_cambio_estado                                                                 DateTime?                 @default(now()) @db.Timestamp(6)
  id_motivo_rechazo                                                                   Int?
  observaciones_rechazo                                                               String?
  fecha_propuesta                                                                     DateTime?                 @default(now()) @db.Timestamp(6)
  fecha_vencimiento                                                                   DateTime?                 @db.Date
  subtotal_servicios                                                                  Decimal?                  @db.Decimal(12, 2)
  subtotal_componentes                                                                Decimal?                  @db.Decimal(12, 2)
  total_propuesta                                                                     Decimal?                  @db.Decimal(12, 2)
  id_orden_servicio_generada                                                          Int?
  fecha_conversion_os                                                                 DateTime?                 @db.Timestamp(6)
  observaciones                                                                       String?
  metadata                                                                            Json?
  propuesta_por                                                                       Int
  fecha_creacion                                                                      DateTime?                 @default(now()) @db.Timestamp(6)
  aprobada_por                                                                        Int?
  fecha_aprobacion                                                                    DateTime?                 @db.Timestamp(6)
  modificado_por                                                                      Int?
  fecha_modificacion                                                                  DateTime?                 @db.Timestamp(6)
  aprobaciones_cotizacion                                                             aprobaciones_cotizacion[]
  historial_envios                                                                    historial_envios[]
  items_propuesta                                                                     items_propuesta[]
  usuarios_propuestas_correctivo_aprobada_porTousuarios                               usuarios?                 @relation("propuestas_correctivo_aprobada_porTousuarios", fields: [aprobada_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  clientes                                                                            clientes                  @relation(fields: [id_cliente], references: [id_cliente], onDelete: NoAction, onUpdate: NoAction)
  equipos                                                                             equipos?                  @relation(fields: [id_equipo], references: [id_equipo], onDelete: NoAction, onUpdate: NoAction)
  estados_cotizacion                                                                  estados_cotizacion        @relation(fields: [id_estado], references: [id_estado], onDelete: NoAction, onUpdate: NoAction)
  motivos_rechazo                                                                     motivos_rechazo?          @relation(fields: [id_motivo_rechazo], references: [id_motivo_rechazo], onDelete: NoAction, onUpdate: NoAction)
  ordenes_servicio_propuestas_correctivo_id_orden_servicioToordenes_servicio          ordenes_servicio          @relation("propuestas_correctivo_id_orden_servicioToordenes_servicio", fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: NoAction, onUpdate: NoAction)
  ordenes_servicio_propuestas_correctivo_id_orden_servicio_generadaToordenes_servicio ordenes_servicio?         @relation("propuestas_correctivo_id_orden_servicio_generadaToordenes_servicio", fields: [id_orden_servicio_generada], references: [id_orden_servicio], onDelete: NoAction, onUpdate: NoAction)
  usuarios_propuestas_correctivo_modificado_porTousuarios                             usuarios?                 @relation("propuestas_correctivo_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  empleados                                                                           empleados                 @relation(fields: [propuesta_por], references: [id_empleado], onDelete: NoAction, onUpdate: NoAction)

  @@index([id_cliente, fecha_propuesta(sort: Desc)], map: "idx_prop_cliente")
  @@index([id_estado, fecha_propuesta(sort: Desc)], map: "idx_prop_estado")
  @@index([id_orden_servicio], map: "idx_prop_os_origen")
  @@index([id_estado], map: "idx_prop_pendientes")
  @@index([propuesta_por], map: "idx_prop_tecnico")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model proveedores {
  id_proveedor                                  Int                      @id @default(autoincrement())
  id_persona                                    Int                      @unique
  codigo_proveedor                              String?                  @default(dbgenerated("('PROV-'::text || lpad((id_proveedor)::text, 4, '0'::text))")) @db.VarChar(20)
  tipo_proveedor                                tipo_proveedor_enum?     @default(NACIONAL)
  categoria_proveedor                           categoria_proveedor_enum
  responsable_iva                               Boolean?                 @default(true)
  tiempo_entrega_dias                           Int?
  servicios_ofrecidos                           String?
  tarifa_hora                                   Decimal?                 @db.Decimal(12, 2)
  tarifa_dia                                    Decimal?                 @db.Decimal(12, 2)
  tiene_arl                                     Boolean?                 @default(false)
  nombre_arl                                    String?                  @db.VarChar(100)
  fecha_vencimiento_arl                         DateTime?                @db.Date
  realiza_entregas                              Boolean?                 @default(true)
  costo_envio                                   Decimal?                 @db.Decimal(12, 2)
  zona_cobertura                                String?                  @db.VarChar(500)
  proveedor_activo                              Boolean?                 @default(true)
  bloqueado                                     Boolean?                 @default(false)
  motivo_bloqueo                                String?                  @db.VarChar(500)
  fecha_bloqueo                                 DateTime?                @db.Date
  bloqueado_por                                 Int?
  observaciones                                 String?
  creado_por                                    Int
  fecha_creacion                                DateTime?                @default(now()) @db.Timestamp(6)
  modificado_por                                Int?
  fecha_modificacion                            DateTime?                @db.Timestamp(6)
  catalogo_componentes                          catalogo_componentes[]
  lotes_componentes                             lotes_componentes[]
  ordenes_compra                                ordenes_compra[]
  usuarios_proveedores_bloqueado_porTousuarios  usuarios?                @relation("proveedores_bloqueado_porTousuarios", fields: [bloqueado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_proveedores_bloqueado_por")
  usuarios_proveedores_creado_porTousuarios     usuarios                 @relation("proveedores_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_proveedores_creado_por")
  usuarios_proveedores_modificado_porTousuarios usuarios?                @relation("proveedores_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_proveedores_modificado_por")
  persona                                       personas                 @relation(fields: [id_persona], references: [id_persona], onDelete: Cascade, onUpdate: NoAction, map: "fk_proveedores_persona")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model recepciones_compra {
  id_recepcion           Int                        @id @default(autoincrement())
  numero_recepcion       String                     @unique @db.VarChar(50)
  id_orden_compra        Int
  id_detalle_orden       Int
  cantidad_recibida      Decimal                    @db.Decimal(10, 2)
  tipo_recepcion         tipo_recepcion_compra_enum
  cantidad_aceptada      Decimal                    @db.Decimal(10, 2)
  cantidad_rechazada     Decimal                    @default(0) @db.Decimal(10, 2)
  calidad                calidad_recepcion_enum
  id_ubicacion_destino   Int?
  costo_unitario_real    Decimal?                   @db.Decimal(12, 2)
  observaciones          String?
  recibido_por           Int
  fecha_recepcion        DateTime                   @default(now()) @db.Timestamp(6)
  ordenes_compra_detalle ordenes_compra_detalle     @relation(fields: [id_detalle_orden], references: [id_detalle], onUpdate: NoAction, map: "fk_recepcion_detalle_orden")
  ordenes_compra         ordenes_compra             @relation(fields: [id_orden_compra], references: [id_orden_compra], onUpdate: NoAction, map: "fk_recepcion_orden_compra")
  usuarios               usuarios                   @relation(fields: [recibido_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_recepcion_recibido_por")
  ubicaciones_bodega     ubicaciones_bodega?        @relation(fields: [id_ubicacion_destino], references: [id_ubicacion], onUpdate: NoAction, map: "fk_recepcion_ubicacion_destino")

  @@index([id_detalle_orden], map: "idx_recepcion_detalle_orden")
  @@index([id_orden_compra], map: "idx_recepcion_orden_compra")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model remisiones {
  id_remision               Int                        @id @default(autoincrement())
  numero_remision           String                     @unique @db.VarChar(50)
  fecha_remision            DateTime                   @default(now()) @db.Timestamp(6)
  tipo_destino              tipo_destino_remision_enum
  id_destino                Int
  nombre_destinatario       String                     @db.VarChar(200)
  tipo_remision             tipo_remision_enum
  requiere_devolucion       Boolean
  fecha_devolucion_esperada DateTime?                  @db.Date
  fecha_devolucion_real     DateTime?                  @db.Timestamp(6)
  id_orden_servicio         Int?
  id_cotizacion             Int?
  estado_remision           estado_remision_enum       @default(ABIERTA)
  fecha_cierre              DateTime?                  @db.Timestamp(6)
  entregado_por             Int
  recibido_por              String?                    @db.VarChar(200)
  firma_digital_recepcion   String?
  movimientos_inventario    movimientos_inventario[]
  cotizaciones              cotizaciones?              @relation(fields: [id_cotizacion], references: [id_cotizacion], onUpdate: NoAction, map: "fk_remision_cotizacion")
  usuarios                  usuarios                   @relation(fields: [entregado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_remision_entregado_por")
  ordenes_servicio          ordenes_servicio?          @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onUpdate: NoAction, map: "fk_remision_orden_servicio")
  remisiones_detalle        remisiones_detalle[]

  @@index([estado_remision, fecha_remision(sort: Desc)], map: "idx_remision_estado")
  @@index([tipo_destino, id_destino], map: "idx_remision_tipo_destino")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model remisiones_detalle {
  id_detalle_remision  Int                       @id @default(autoincrement())
  id_remision          Int
  tipo_item            tipo_item_remision_enum
  id_componente        Int?
  descripcion_item     String                    @db.VarChar(300)
  cantidad_entregada   Decimal                   @db.Decimal(10, 2)
  cantidad_devuelta    Decimal                   @default(0) @db.Decimal(10, 2)
  cantidad_pendiente   Decimal?                  @default(dbgenerated("(cantidad_entregada - cantidad_devuelta)")) @db.Decimal(10, 2)
  estado_item          estado_item_remision_enum @default(ENTREGADO)
  observaciones        String?
  catalogo_componentes catalogo_componentes?     @relation(fields: [id_componente], references: [id_componente], onDelete: Restrict, onUpdate: NoAction, map: "fk_remision_det_componente")
  remisiones           remisiones                @relation(fields: [id_remision], references: [id_remision], onDelete: Cascade, onUpdate: NoAction, map: "fk_remision_det_remision")

  @@index([id_remision], map: "idx_remision_det_remision")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model roles {
  id_rol                                  Int              @id @default(autoincrement())
  codigo_rol                              String           @unique @db.VarChar(50)
  nombre_rol                              String           @db.VarChar(100)
  descripcion                             String?
  nivel_jerarquia                         Int?             @default(0)
  es_rol_sistema                          Boolean?         @default(false)
  color_hex                               String?          @db.VarChar(7)
  icono                                   String?          @db.VarChar(50)
  permite_acceso_web                      Boolean?         @default(true)
  permite_acceso_movil                    Boolean?         @default(false)
  permite_acceso_portal_cliente           Boolean?         @default(false)
  activo                                  Boolean?         @default(true)
  observaciones                           String?
  fecha_creacion                          DateTime?        @default(now()) @db.Timestamp(6)
  creado_por                              Int?
  fecha_modificacion                      DateTime?        @db.Timestamp(6)
  modificado_por                          Int?
  usuarios_roles_creado_porTousuarios     usuarios?        @relation("roles_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_roles_creado_por")
  usuarios_roles_modificado_porTousuarios usuarios?        @relation("roles_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_roles_modificado_por")
  roles_permisos                          roles_permisos[]
  usuarios_roles                          usuarios_roles[]

  @@index([codigo_rol], map: "idx_roles_codigo")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model roles_permisos {
  id_rol           Int
  id_permiso       Int
  fecha_asignacion DateTime? @default(now()) @db.Timestamp(6)
  asignado_por     Int?
  usuarios         usuarios? @relation(fields: [asignado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_roles_permisos_asignado_por")
  permisos         permisos  @relation(fields: [id_permiso], references: [id_permiso], onDelete: Cascade, onUpdate: NoAction, map: "fk_roles_permisos_permiso")
  roles            roles     @relation(fields: [id_rol], references: [id_rol], onDelete: Cascade, onUpdate: NoAction, map: "fk_roles_permisos_rol")

  @@id([id_rol, id_permiso])
  @@index([id_permiso, id_rol], map: "idx_roles_permisos_permiso")
  @@index([id_rol, id_permiso], map: "idx_roles_permisos_rol")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sedes_cliente {
  id_sede                                         Int                   @id @default(autoincrement())
  id_cliente                                      Int
  nombre_sede                                     String                @db.VarChar(200)
  direccion_sede                                  String                @db.VarChar(300)
  barrio_zona                                     String?               @db.VarChar(100)
  ciudad_sede                                     String                @default("CARTAGENA") @db.VarChar(100)
  departamento_sede                               String?               @default("BOLÃVAR") @db.VarChar(100)
  zona_geografica                                 zona_geografica_enum?
  contacto_sede                                   String?               @db.VarChar(200)
  cargo_contacto                                  String?               @db.VarChar(100)
  telefono_sede                                   String?               @db.VarChar(20)
  celular_sede                                    String?               @db.VarChar(20)
  email_sede                                      String?               @db.VarChar(150)
  activo                                          Boolean?              @default(true)
  fecha_cierre                                    DateTime?             @db.Date
  motivo_cierre                                   String?               @db.VarChar(500)
  observaciones                                   String?
  creado_por                                      Int
  fecha_creacion                                  DateTime?             @default(now()) @db.Timestamp(6)
  modificado_por                                  Int?
  fecha_modificacion                              DateTime?             @db.Timestamp(6)
  cotizaciones                                    cotizaciones[]
  equipos                                         equipos[]
  ordenes_servicio                                ordenes_servicio[]
  clientes                                        clientes              @relation(fields: [id_cliente], references: [id_cliente], onDelete: Cascade, onUpdate: NoAction, map: "fk_sedes_cliente")
  usuarios_sedes_cliente_creado_porTousuarios     usuarios              @relation("sedes_cliente_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: SetNull, onUpdate: NoAction, map: "fk_sedes_creado_por")
  usuarios_sedes_cliente_modificado_porTousuarios usuarios?             @relation("sedes_cliente_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_sedes_modificado_por")
}

model sequence_counter {
  id            Int      @id @default(autoincrement())
  type          String   @db.VarChar(20)
  year          Int
  current_value Int      @default(0)
  created_at    DateTime @default(now()) @db.Timestamp(6)
  updated_at    DateTime @db.Timestamp(6)

  @@unique([type, year], map: "uk_sequence_type_year")
  @@index([type, year], map: "idx_sequence_type_year")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tipos_componente {
  id_tipo_componente           Int                            @id @default(autoincrement())
  codigo_tipo                  String                         @unique @db.VarChar(50)
  nombre_componente            String                         @db.VarChar(100)
  categoria                    categoria_componente_enum
  subcategoria                 String?                        @db.VarChar(50)
  es_consumible                Boolean?                       @default(true)
  es_inventariable             Boolean?                       @default(true)
  aplica_a                     aplicabilidad_enum
  descripcion                  String?
  activo                       Boolean?                       @default(true)
  creado_por                   Int?
  fecha_creacion               DateTime?                      @default(now()) @db.Timestamp(6)
  catalogo_actividades         catalogo_actividades[]
  catalogo_componentes         catalogo_componentes[]
  componentes_equipo           componentes_equipo[]
  componentes_usados           componentes_usados[]
  items_cotizacion_componentes items_cotizacion_componentes[]
  items_propuesta              items_propuesta[]
  usuarios                     usuarios?                      @relation(fields: [creado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_tipo_componente_creado_por")

  @@index([categoria], map: "idx_tipo_componente_categoria")
  @@index([codigo_tipo], map: "idx_tipo_componente_codigo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tipos_equipo {
  id_tipo_equipo                                 Int                      @id @default(autoincrement())
  codigo_tipo                                    String                   @unique @db.VarChar(30)
  nombre_tipo                                    String                   @db.VarChar(100)
  descripcion                                    String?
  categoria                                      categoria_equipo_enum
  tiene_motor                                    Boolean?                 @default(false)
  tiene_generador                                Boolean?                 @default(false)
  tiene_bomba                                    Boolean?                 @default(false)
  requiere_horometro                             Boolean?                 @default(false)
  permite_mantenimiento_tipo_a                   Boolean?                 @default(true)
  permite_mantenimiento_tipo_b                   Boolean?                 @default(false)
  intervalo_tipo_a_dias                          Int?
  intervalo_tipo_a_horas                         Decimal?                 @db.Decimal(10, 1)
  intervalo_tipo_b_dias                          Int?
  intervalo_tipo_b_horas                         Decimal?                 @db.Decimal(10, 1)
  criterio_intervalo                             criterio_intervalo_enum? @default(DIAS)
  formato_ficha_tecnica                          String                   @db.VarChar(50)
  formato_mantenimiento_tipo_a                   String?                  @db.VarChar(50)
  formato_mantenimiento_tipo_b                   String?                  @db.VarChar(50)
  orden                                          Int?                     @default(0)
  metadata                                       Json?
  activo                                         Boolean?                 @default(true)
  disponible                                     Boolean?                 @default(true)
  creado_por                                     Int?
  fecha_creacion                                 DateTime?                @default(now()) @db.Timestamp(6)
  modificado_por                                 Int?
  fecha_modificacion                             DateTime?                @db.Timestamp(6)
  catalogo_servicios                             catalogo_servicios[]
  equipos                                        equipos[]
  parametros_medicion                            parametros_medicion[]
  usuarios_tipos_equipo_creado_porTousuarios     usuarios?                @relation("tipos_equipo_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_tipos_equipo_creado_por")
  usuarios_tipos_equipo_modificado_porTousuarios usuarios?                @relation("tipos_equipo_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: Restrict, onUpdate: NoAction, map: "fk_tipos_equipo_modificado_por")
  tipos_servicio                                 tipos_servicio[]

  @@index([codigo_tipo], map: "idx_tipos_equipo_codigo")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model tipos_servicio {
  id_tipo_servicio                                 Int                     @id @default(autoincrement())
  codigo_tipo                                      String                  @unique @db.VarChar(50)
  nombre_tipo                                      String                  @db.VarChar(200)
  descripcion                                      String?
  categoria                                        categoria_servicio_enum
  id_tipo_equipo                                   Int?
  tiene_checklist                                  Boolean?                @default(true)
  tiene_plantilla_informe                          Boolean?                @default(true)
  requiere_mediciones                              Boolean?                @default(true)
  duracion_estimada_horas                          Decimal?                @db.Decimal(4, 2)
  orden_visualizacion                              Int?
  icono                                            String?                 @db.VarChar(50)
  color_hex                                        String?                 @db.VarChar(7)
  activo                                           Boolean?                @default(true)
  observaciones                                    String?
  creado_por                                       Int?
  fecha_creacion                                   DateTime?               @default(now()) @db.Timestamp(6)
  modificado_por                                   Int?
  fecha_modificacion                               DateTime?               @db.Timestamp(6)
  catalogo_actividades                             catalogo_actividades[]
  catalogo_servicios                               catalogo_servicios[]
  cronogramas_servicio                             cronogramas_servicio[]
  equipos_contrato                                 equipos_contrato[]
  ordenes_servicio                                 ordenes_servicio[]
  plantillas_informe                               plantillas_informe[]
  usuarios_tipos_servicio_creado_porTousuarios     usuarios?               @relation("tipos_servicio_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  tipos_equipo                                     tipos_equipo?           @relation(fields: [id_tipo_equipo], references: [id_tipo_equipo], onDelete: NoAction, onUpdate: NoAction)
  usuarios_tipos_servicio_modificado_porTousuarios usuarios?               @relation("tipos_servicio_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@index([categoria], map: "idx_tipos_servicio_categoria")
  @@index([id_tipo_equipo], map: "idx_tipos_servicio_equipo")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ubicaciones_bodega {
  id_ubicacion           Int                      @id @default(autoincrement())
  codigo_ubicacion       String                   @unique @db.VarChar(20)
  zona                   String                   @db.VarChar(50)
  pasillo                String?                  @db.VarChar(10)
  estante                String?                  @db.VarChar(10)
  nivel                  String?                  @db.VarChar(10)
  activo                 Boolean                  @default(true)
  movimientos_inventario movimientos_inventario[]
  recepciones_compra     recepciones_compra[]

  @@index([zona, activo], map: "idx_ubicacion_zona")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model usuarios {
  id_usuario                                                               Int                            @id @default(autoincrement())
  id_persona                                                               Int                            @unique
  username                                                                 String                         @unique @db.VarChar(50)
  email                                                                    String                         @unique @db.Citext
  password_hash                                                            String                         @db.VarChar(255)
  debe_cambiar_password                                                    Boolean?                       @default(true)
  fecha_ultimo_cambio_password                                             DateTime?                      @db.Timestamp(6)
  intentos_fallidos                                                        Int?                           @default(0)
  fecha_ultimo_intento_fallido                                             DateTime?                      @db.Timestamp(6)
  fecha_ultimo_bloqueo                                                     DateTime?                      @db.Timestamp(6)
  bloqueado_por_intentos                                                   Boolean?                       @default(false)
  token_recuperacion                                                       String?                        @db.VarChar(255)
  fecha_expiracion_token                                                   DateTime?                      @db.Timestamp(6)
  ultima_sesion                                                            DateTime?                      @db.Timestamp(6)
  ultima_ip                                                                String?                        @db.VarChar(45)
  dispositivo_ultimo_acceso                                                String?                        @db.VarChar(300)
  estado                                                                   estado_usuario_enum?           @default(PENDIENTE_ACTIVACION)
  fecha_activacion                                                         DateTime?                      @db.Timestamp(6)
  fecha_desactivacion                                                      DateTime?                      @db.Timestamp(6)
  motivo_suspension                                                        String?                        @db.VarChar(500)
  suspendido_hasta                                                         DateTime?                      @db.Timestamp(6)
  creado_por                                                               Int?
  fecha_creacion                                                           DateTime?                      @default(now()) @db.Timestamp(6)
  modificado_por                                                           Int?
  fecha_modificacion                                                       DateTime?                      @db.Timestamp(6)
  alertas_stock                                                            alertas_stock[]
  aprobaciones_cotizacion_aprobaciones_cotizacion_aprobada_porTousuarios   aprobaciones_cotizacion[]      @relation("aprobaciones_cotizacion_aprobada_porTousuarios")
  aprobaciones_cotizacion_aprobaciones_cotizacion_solicitada_porTousuarios aprobaciones_cotizacion[]      @relation("aprobaciones_cotizacion_solicitada_porTousuarios")
  archivos_equipo_archivos_equipo_eliminado_porTousuarios                  archivos_equipo[]              @relation("archivos_equipo_eliminado_porTousuarios")
  archivos_equipo_archivos_equipo_modificado_porTousuarios                 archivos_equipo[]              @relation("archivos_equipo_modificado_porTousuarios")
  archivos_equipo_archivos_equipo_subido_porTousuarios                     archivos_equipo[]              @relation("archivos_equipo_subido_porTousuarios")
  bitacoras                                                                bitacoras[]
  catalogo_actividades_catalogo_actividades_creado_porTousuarios           catalogo_actividades[]         @relation("catalogo_actividades_creado_porTousuarios")
  catalogo_actividades_catalogo_actividades_modificado_porTousuarios       catalogo_actividades[]         @relation("catalogo_actividades_modificado_porTousuarios")
  catalogo_componentes_catalogo_componentes_creado_porTousuarios           catalogo_componentes[]         @relation("catalogo_componentes_creado_porTousuarios")
  catalogo_componentes_catalogo_componentes_modificado_porTousuarios       catalogo_componentes[]         @relation("catalogo_componentes_modificado_porTousuarios")
  catalogo_servicios_catalogo_servicios_creado_porTousuarios               catalogo_servicios[]           @relation("catalogo_servicios_creado_porTousuarios")
  catalogo_servicios_catalogo_servicios_modificado_porTousuarios           catalogo_servicios[]           @relation("catalogo_servicios_modificado_porTousuarios")
  certificaciones_tecnicas                                                 certificaciones_tecnicas[]
  clientes_clientes_creado_porTousuarios                                   clientes[]                     @relation("clientes_creado_porTousuarios")
  clientes_clientes_modificado_porTousuarios                               clientes[]                     @relation("clientes_modificado_porTousuarios")
  componentes_equipo_componentes_equipo_creado_porTousuarios               componentes_equipo[]           @relation("componentes_equipo_creado_porTousuarios")
  componentes_equipo_componentes_equipo_modificado_porTousuarios           componentes_equipo[]           @relation("componentes_equipo_modificado_porTousuarios")
  componentes_usados_componentes_usados_modificado_porTousuarios           componentes_usados[]           @relation("componentes_usados_modificado_porTousuarios")
  componentes_usados_componentes_usados_registrado_porTousuarios           componentes_usados[]           @relation("componentes_usados_registrado_porTousuarios")
  contactos_adicionales_contactos_adicionales_modificado_porTousuarios     contactos_adicionales[]        @relation("contactos_adicionales_modificado_porTousuarios")
  contactos_adicionales_contactos_adicionales_registrado_porTousuarios     contactos_adicionales[]        @relation("contactos_adicionales_registrado_porTousuarios")
  contratos_mantenimiento                                                  contratos_mantenimiento[]
  cotizaciones_cotizaciones_aprobada_internamente_porTousuarios            cotizaciones[]                 @relation("cotizaciones_aprobada_internamente_porTousuarios")
  cotizaciones_cotizaciones_modificado_porTousuarios                       cotizaciones[]                 @relation("cotizaciones_modificado_porTousuarios")
  cronogramas_servicio                                                     cronogramas_servicio[]
  detalle_servicios_orden_detalle_servicios_orden_modificado_porTousuarios detalle_servicios_orden[]      @relation("detalle_servicios_orden_modificado_porTousuarios")
  detalle_servicios_orden_detalle_servicios_orden_registrado_porTousuarios detalle_servicios_orden[]      @relation("detalle_servicios_orden_registrado_porTousuarios")
  devoluciones_proveedor                                                   devoluciones_proveedor[]
  documentos_generados                                                     documentos_generados[]
  empleados_empleados_creado_porTousuarios                                 empleados[]                    @relation("empleados_creado_porTousuarios")
  empleados_empleados_modificado_porTousuarios                             empleados[]                    @relation("empleados_modificado_porTousuarios")
  equipos_equipos_creado_porTousuarios                                     equipos[]                      @relation("equipos_creado_porTousuarios")
  equipos_equipos_modificado_porTousuarios                                 equipos[]                      @relation("equipos_modificado_porTousuarios")
  equipos_bomba_equipos_bomba_creado_porTousuarios                         equipos_bomba[]                @relation("equipos_bomba_creado_porTousuarios")
  equipos_bomba_equipos_bomba_modificado_porTousuarios                     equipos_bomba[]                @relation("equipos_bomba_modificado_porTousuarios")
  equipos_generador_equipos_generador_creado_porTousuarios                 equipos_generador[]            @relation("equipos_generador_creado_porTousuarios")
  equipos_generador_equipos_generador_modificado_porTousuarios             equipos_generador[]            @relation("equipos_generador_modificado_porTousuarios")
  equipos_motor_equipos_motor_creado_porTousuarios                         equipos_motor[]                @relation("equipos_motor_creado_porTousuarios")
  equipos_motor_equipos_motor_modificado_porTousuarios                     equipos_motor[]                @relation("equipos_motor_modificado_porTousuarios")
  firmas_administrativas_firmas_administrativas_creado_porTousuarios       firmas_administrativas[]       @relation("firmas_administrativas_creado_porTousuarios")
  firmas_administrativas_firmas_administrativas_modificado_porTousuarios   firmas_administrativas[]       @relation("firmas_administrativas_modificado_porTousuarios")
  firmas_digitales                                                         firmas_digitales[]
  gastos_orden_gastos_orden_aprobado_porTousuarios                         gastos_orden[]                 @relation("gastos_orden_aprobado_porTousuarios")
  gastos_orden_gastos_orden_modificado_porTousuarios                       gastos_orden[]                 @relation("gastos_orden_modificado_porTousuarios")
  gastos_orden_gastos_orden_registrado_porTousuarios                       gastos_orden[]                 @relation("gastos_orden_registrado_porTousuarios")
  historial_contrato                                                       historial_contrato[]
  historial_envios                                                         historial_envios[]
  historial_estados_equipo                                                 historial_estados_equipo[]
  historial_estados_orden                                                  historial_estados_orden[]
  informes_informes_aprobado_porTousuarios                                 informes[]                     @relation("informes_aprobado_porTousuarios")
  informes_informes_generado_porTousuarios                                 informes[]                     @relation("informes_generado_porTousuarios")
  informes_informes_revisado_porTousuarios                                 informes[]                     @relation("informes_revisado_porTousuarios")
  items_cotizacion_componentes                                             items_cotizacion_componentes[]
  items_cotizacion_servicios                                               items_cotizacion_servicios[]
  lecturas_horometro                                                       lecturas_horometro[]
  lotes_componentes                                                        lotes_componentes[]
  movimientos_inventario_movimientos_inventario_aprobado_porTousuarios     movimientos_inventario[]       @relation("movimientos_inventario_aprobado_porTousuarios")
  movimientos_inventario_movimientos_inventario_realizado_porTousuarios    movimientos_inventario[]       @relation("movimientos_inventario_realizado_porTousuarios")
  notificaciones                                                           notificaciones[]
  ordenes_compra_ordenes_compra_aprobada_porTousuarios                     ordenes_compra[]               @relation("ordenes_compra_aprobada_porTousuarios")
  ordenes_compra_ordenes_compra_solicitada_porTousuarios                   ordenes_compra[]               @relation("ordenes_compra_solicitada_porTousuarios")
  ordenes_equipos_ordenes_equipos_creado_porTousuarios                     ordenes_equipos[]              @relation("ordenes_equipos_creado_porTousuarios")
  ordenes_equipos_ordenes_equipos_modificado_porTousuarios                 ordenes_equipos[]              @relation("ordenes_equipos_modificado_porTousuarios")
  ordenes_servicio_ordenes_servicio_aprobada_porTousuarios                 ordenes_servicio[]             @relation("ordenes_servicio_aprobada_porTousuarios")
  ordenes_servicio_ordenes_servicio_creado_porTousuarios                   ordenes_servicio[]             @relation("ordenes_servicio_creado_porTousuarios")
  ordenes_servicio_ordenes_servicio_modificado_porTousuarios               ordenes_servicio[]             @relation("ordenes_servicio_modificado_porTousuarios")
  parametros_medicion_parametros_medicion_creado_porTousuarios             parametros_medicion[]          @relation("parametros_medicion_creado_porTousuarios")
  parametros_medicion_parametros_medicion_modificado_porTousuarios         parametros_medicion[]          @relation("parametros_medicion_modificado_porTousuarios")
  permisos                                                                 permisos[]
  plantillas_informe_plantillas_informe_creado_porTousuarios               plantillas_informe[]           @relation("plantillas_informe_creado_porTousuarios")
  plantillas_informe_plantillas_informe_modificado_porTousuarios           plantillas_informe[]           @relation("plantillas_informe_modificado_porTousuarios")
  propuestas_correctivo_propuestas_correctivo_aprobada_porTousuarios       propuestas_correctivo[]        @relation("propuestas_correctivo_aprobada_porTousuarios")
  propuestas_correctivo_propuestas_correctivo_modificado_porTousuarios     propuestas_correctivo[]        @relation("propuestas_correctivo_modificado_porTousuarios")
  proveedores_proveedores_bloqueado_porTousuarios                          proveedores[]                  @relation("proveedores_bloqueado_porTousuarios")
  proveedores_proveedores_creado_porTousuarios                             proveedores[]                  @relation("proveedores_creado_porTousuarios")
  proveedores_proveedores_modificado_porTousuarios                         proveedores[]                  @relation("proveedores_modificado_porTousuarios")
  recepciones_compra                                                       recepciones_compra[]
  remisiones                                                               remisiones[]
  roles_roles_creado_porTousuarios                                         roles[]                        @relation("roles_creado_porTousuarios")
  roles_roles_modificado_porTousuarios                                     roles[]                        @relation("roles_modificado_porTousuarios")
  roles_permisos                                                           roles_permisos[]
  sedes_cliente_sedes_cliente_creado_porTousuarios                         sedes_cliente[]                @relation("sedes_cliente_creado_porTousuarios")
  sedes_cliente_sedes_cliente_modificado_porTousuarios                     sedes_cliente[]                @relation("sedes_cliente_modificado_porTousuarios")
  tipos_componente                                                         tipos_componente[]
  tipos_equipo_tipos_equipo_creado_porTousuarios                           tipos_equipo[]                 @relation("tipos_equipo_creado_porTousuarios")
  tipos_equipo_tipos_equipo_modificado_porTousuarios                       tipos_equipo[]                 @relation("tipos_equipo_modificado_porTousuarios")
  tipos_servicio_tipos_servicio_creado_porTousuarios                       tipos_servicio[]               @relation("tipos_servicio_creado_porTousuarios")
  tipos_servicio_tipos_servicio_modificado_porTousuarios                   tipos_servicio[]               @relation("tipos_servicio_modificado_porTousuarios")
  usuarios_usuarios_creado_porTousuarios                                   usuarios?                      @relation("usuarios_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_usuarios_creado_por")
  other_usuarios_usuarios_creado_porTousuarios                             usuarios[]                     @relation("usuarios_creado_porTousuarios")
  usuarios_usuarios_modificado_porTousuarios                               usuarios?                      @relation("usuarios_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_usuarios_modificado_por")
  other_usuarios_usuarios_modificado_porTousuarios                         usuarios[]                     @relation("usuarios_modificado_porTousuarios")
  persona                                                                  personas                       @relation(fields: [id_persona], references: [id_persona], onDelete: Cascade, onUpdate: NoAction, map: "fk_usuarios_persona")
  usuarios_roles_usuarios_roles_asignado_porTousuarios                     usuarios_roles[]               @relation("usuarios_roles_asignado_porTousuarios")
  usuarios_roles_usuarios_roles_id_usuarioTousuarios                       usuarios_roles[]               @relation("usuarios_roles_id_usuarioTousuarios")
  versiones_cotizacion                                                     versiones_cotizacion[]

  @@index([estado, fecha_creacion], map: "idx_usuarios_estado")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model usuarios_roles {
  id_usuario                                     Int
  id_rol                                         Int
  fecha_asignacion                               DateTime? @default(now()) @db.Timestamp(6)
  asignado_por                                   Int?
  usuarios_usuarios_roles_asignado_porTousuarios usuarios? @relation("usuarios_roles_asignado_porTousuarios", fields: [asignado_por], references: [id_usuario], onUpdate: NoAction, map: "fk_usuarios_roles_asignado_por")
  roles                                          roles     @relation(fields: [id_rol], references: [id_rol], onDelete: Cascade, onUpdate: NoAction, map: "fk_usuarios_roles_rol")
  usuarios_usuarios_roles_id_usuarioTousuarios   usuarios  @relation("usuarios_roles_id_usuarioTousuarios", fields: [id_usuario], references: [id_usuario], onDelete: Cascade, onUpdate: NoAction, map: "fk_usuarios_roles_usuario")

  @@id([id_usuario, id_rol])
  @@index([id_rol, id_usuario], map: "idx_usuarios_roles_rol")
  @@index([id_usuario, id_rol], map: "idx_usuarios_roles_usuario")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model versiones_cotizacion {
  id_version        Int          @id @default(autoincrement())
  id_cotizacion     Int
  numero_version    Int
  datos_cotizacion  Json
  items_servicios   Json?
  items_componentes Json?
  subtotal_version  Decimal?     @db.Decimal(12, 2)
  total_version     Decimal?     @db.Decimal(12, 2)
  motivo_cambio     String
  resumen_cambios   String?
  fecha_version     DateTime?    @default(now()) @db.Timestamp(6)
  creada_por        Int?
  metadata          Json?
  usuarios          usuarios?    @relation(fields: [creada_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  cotizaciones      cotizaciones @relation(fields: [id_cotizacion], references: [id_cotizacion], onDelete: Cascade, onUpdate: NoAction)

  @@unique([id_cotizacion, numero_version], map: "uk_cotizacion_version")
  @@index([id_cotizacion, numero_version(sort: Desc)], map: "idx_versiones_cotizacion")
  @@index([fecha_version(sort: Desc)], map: "idx_versiones_fecha")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model ordenes_equipos {
  id_orden_equipo                                   Int                           @id @default(autoincrement())
  id_orden_servicio                                 Int
  id_equipo                                         Int
  orden_secuencia                                   Int                           @default(1)
  nombre_sistema                                    String?                       @db.VarChar(200)
  estado                                            estado_detalle_servicio_enum? @default(PENDIENTE)
  fecha_inicio                                      DateTime?                     @db.Timestamp(6)
  fecha_fin                                         DateTime?                     @db.Timestamp(6)
  observaciones                                     String?
  metadata                                          Json?                         @default("{}")
  creado_por                                        Int?
  fecha_creacion                                    DateTime?                     @default(now()) @db.Timestamp(6)
  modificado_por                                    Int?
  fecha_modificacion                                DateTime?                     @db.Timestamp(6)
  actividades_ejecutadas                            actividades_ejecutadas[]
  evidencias_fotograficas                           evidencias_fotograficas[]
  mediciones_servicio                               mediciones_servicio[]
  usuarios_ordenes_equipos_creado_porTousuarios     usuarios?                     @relation("ordenes_equipos_creado_porTousuarios", fields: [creado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)
  equipos                                           equipos                       @relation(fields: [id_equipo], references: [id_equipo], onUpdate: NoAction)
  ordenes_servicio                                  ordenes_servicio              @relation(fields: [id_orden_servicio], references: [id_orden_servicio], onDelete: Cascade, onUpdate: NoAction)
  usuarios_ordenes_equipos_modificado_porTousuarios usuarios?                     @relation("ordenes_equipos_modificado_porTousuarios", fields: [modificado_por], references: [id_usuario], onDelete: NoAction, onUpdate: NoAction)

  @@unique([id_orden_servicio, id_equipo], map: "uk_orden_equipo")
  @@index([id_equipo], map: "idx_oe_equipo")
  @@index([id_orden_servicio], map: "idx_oe_orden")
  @@index([id_orden_servicio, orden_secuencia], map: "idx_oe_orden_secuencia")
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum aplicabilidad_enum {
  GENERADOR
  BOMBA
  AMBOS
}

enum aplicacion_bomba_enum {
  AGUA_POTABLE
  AGUAS_RESIDUALES
  AGUAS_LLUVIAS
  CONTRAINCENDIOS
  INDUSTRIAL
  PISCINA
  RIEGO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum calidad_recepcion_enum {
  OK
  PARCIAL_DA_ADO @map("PARCIAL_DAÃADO")
  RECHAZADO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum cargo_empleado_enum {
  GERENTE_GENERAL
  GERENTE_OPERACIONES
  GERENTE_COMERCIAL
  ADMINISTRADOR
  SUPERVISOR_TECNICO
  ASESOR_COMERCIAL
  ASESOR_TECNICO
  COORDINADOR_LOGISTICA
  TECNICO_SENIOR
  TECNICO_JUNIOR
  AUXILIAR_ADMINISTRATIVO
  AUXILIAR_TECNICO
  PRACTICANTE
  CONDUCTOR
  OTRO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum categoria_componente_enum {
  FILTRO
  CORREA
  BATERIA
  SELLO
  RODAMIENTO
  FLUIDO
  ELECTRICO
  OTRO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum categoria_equipo_enum {
  ENERGIA
  HIDRAULICA
  CLIMATIZACION
  COMPRESION
  OTRO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum categoria_motivo_ajuste_enum {
  MERMA
  ERROR_REGISTRO
  ROBO
  DA_O              @map("DAÃO")
  DIFERENCIA_CONTEO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum categoria_parametro_enum {
  MECANICO
  ELECTRICO
  HIDRAULICO
  OPERACIONAL
  AMBIENTAL
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum categoria_propuesta_enum {
  CORRECTIVO
  PREVENTIVO_URGENTE
  MEJORA
  EXTENSION_GARANTIA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum categoria_proveedor_enum {
  REPUESTOS
  SERVICIOS
  CONTRATISTA
  SUMINISTROS
  EQUIPOS
  MIXTO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum categoria_servicio_enum {
  PREVENTIVO
  CORRECTIVO
  EMERGENCIA
  INSPECCION
  ESPECIALIZADO
  DIAGNOSTICO
}

enum clase_aislamiento_enum {
  A
  B
  F
  H
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum criterio_intervalo_enum {
  DIAS
  HORAS
  LO_QUE_OCURRA_PRIMERO
}

enum criticidad_enum {
  BAJA
  MEDIA
  ALTA
  CRITICA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_actividad_enum {
  B
  R
  M
  I
  C
  LI
  A
  L
  NA
  LA
  S
  NT
  BA
  F
  RN
  NF
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_alerta_enum {
  PENDIENTE
  VISTA
  EN_PROCESO
  RESUELTA
}

enum estado_aprobacion_gasto_enum {
  PENDIENTE
  APROBADO
  RECHAZADO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_bitacora_enum {
  BORRADOR
  ENVIADA
  APROBADA
}

enum estado_civil_enum {
  SOLTERO
  CASADO
  UNION_LIBRE
  DIVORCIADO
  VIUDO
  SEPARADO
  NO_ESPECIFICA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_contrato_enum {
  ACTIVO
  SUSPENDIDO
  FINALIZADO
  RENOVACION_PENDIENTE
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_cronograma_enum {
  PENDIENTE
  PROGRAMADA
  COMPLETADA
  VENCIDA
  CANCELADA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_detalle_servicio_enum {
  PENDIENTE
  EN_PROCESO
  COMPLETADO
  CANCELADO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_devolucion_proveedor_enum {
  SOLICITADA
  APROBADA_PROVEEDOR
  RETIRADA
  ACREDITADA
}

enum estado_equipo_enum {
  OPERATIVO
  STANDBY
  INACTIVO
  EN_REPARACION
  FUERA_SERVICIO
  BAJA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_informe_enum {
  BORRADOR
  REVISADO
  APROBADO
  ENVIADO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_item_remision_enum {
  ENTREGADO
  DEVUELTO_TOTAL
  DEVUELTO_PARCIAL
  CONSUMIDO_OS
  PERDIDO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_lote_enum {
  DISPONIBLE
  VENCIDO
  CUARENTENA
  AGOTADO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_orden_compra_enum {
  BORRADOR
  ENVIADA
  PARCIAL
  COMPLETADA
  CANCELADA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_orden_enum {
  PROGRAMADA
  ASIGNADA
  EN_PROCESO
  COMPLETADA
  APROBADA
  CANCELADA
  EN_ESPERA_REPUESTO
}

enum estado_pintura_enum {
  EXCELENTE
  BUENO
  REGULAR
  MALO
  NO_APLICA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_remision_enum {
  ABIERTA
  CERRADA
  VENCIDA
  CANCELADA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum estado_usuario_enum {
  ACTIVO
  INACTIVO
  SUSPENDIDO
  BLOQUEADO
  PENDIENTE_ACTIVACION
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum motivo_devolucion_proveedor_enum {
  DEFECTUOSO
  INCORRECTO
  PROXIMO_VENCER
  EXCESO
}

enum nivel_academico_enum {
  PRIMARIA
  BACHILLERATO
  TECNICO
  TECNOLOGO
  PROFESIONAL
  ESPECIALIZACION
  MAESTRIA
  DOCTORADO
  NINGUNO
  OTRO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum nivel_alerta_enum {
  OK
  ADVERTENCIA
  CRITICO
  INFORMATIVO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum nivel_aprobacion_enum {
  SUPERVISOR
  GERENTE
  DIRECCION
  NINGUNO
}

enum numero_fases_enum {
  MONOFASICO
  TRIFASICO
}

enum origen_actividad_plan_enum {
  ADMIN
  TECNICO
}

enum origen_componente_enum {
  BODEGA
  COMPRA_DIRECTA
  CLIENTE
  GARANTIA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum origen_movimiento_inventario_enum {
  COMPRA
  CONSUMO_OS
  REMISION
  DEVOLUCION
  CONTEO_FISICO
  MERMA
  CORRECCION_ERROR
  INVENTARIO_INICIAL
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum origen_solicitud_enum {
  PROGRAMADO
  CLIENTE
  INTERNO
  EMERGENCIA
  GARANTIA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum periodicidad_enum {
  SEMANAL
  QUINCENAL
  MENSUAL
  BIMESTRAL
  TRIMESTRAL
  SEMESTRAL
  ANUAL
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum periodicidad_mantenimiento_enum {
  MENSUAL
  BIMESTRAL
  TRIMESTRAL
  CUATRIMESTRAL
  SEMESTRAL
  ANUAL
  POR_SOLICITUD
  SIN_DEFINIR
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum prioridad_enum {
  NORMAL
  ALTA
  URGENTE
  EMERGENCIA
}

enum sexo_enum {
  MASCULINO
  FEMENINO
  OTRO
  NO_ESPECIFICA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_actividad_enum {
  INSPECCION
  MEDICION
  LIMPIEZA
  LUBRICACION
  AJUSTE
  CAMBIO
  PRUEBA
  VERIFICACION
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_alerta_stock_enum {
  STOCK_MINIMO
  VENCIMIENTO_CRITICO
  VENCIMIENTO_PROXIMO
  DEVOLUCION_VENCIDA
  LOTE_AGOTADO
}

enum tipo_arranque_enum {
  ELECTRICO
  MANUAL
  NEUMATICO
  HIDRAULICO
}

enum tipo_bomba_enum {
  CENTRIFUGA
  TURBINA_VERTICAL_POZO
  SUMERGIBLE
  PERIFERICA
  TURBINA
  DESPLAZAMIENTO_POSITIVO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_certificacion_enum {
  TRABAJO_ALTURAS
  RIESGO_ELECTRICO
  SEGURIDAD_INDUSTRIAL
  TECNICA_ESPECIALIZADA
  OTRA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_cliente_enum {
  RESIDENCIAL
  COMERCIAL
  INDUSTRIAL
  HOSPITALARIO
  EDUCATIVO
  GUBERNAMENTAL
  HOTELERO
  EDIFICIO_RESIDENCIAL
  OTRO
}

enum tipo_combustible_enum {
  DIESEL
  GASOLINA
  GAS_NATURAL
  GLP
  DUAL
  BIODIESEL
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_componente_comercial_enum {
  ORIGINAL
  GENERICO
  REMANUFACTURADO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_contrato_empleado_enum {
  INDEFINIDO
  TERMINO_FIJO
  PRESTACION_SERVICIOS
  APRENDIZAJE
  PRACTICAS
  OBRA_LABOR
}

enum tipo_contrato_enum {
  SIN_CONTRATO
  PREVENTIVO
  INTEGRAL
  POR_LLAMADA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_contrato_mantenimiento_enum {
  PREVENTIVO_RECURRENTE
  INTEGRAL
  ESPECIAL
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_dato_parametro_enum {
  NUMERICO
  TEXTO
  BOOLEANO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_destino_remision_enum {
  TECNICO
  CLIENTE
  PROVEEDOR
  OTRO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_documento_enum {
  INFORME_SERVICIO
  BITACORA_MENSUAL
  COTIZACION
  PROPUESTA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_evidencia_enum {
  ANTES
  DURANTE
  DESPUES
  DA_O              @map("DAÃO")
  TRABAJO_REALIZADO
  ENTORNO
  MEDICION
  COMPONENTE
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_firma_digital_enum {
  TECNICO
  CLIENTE
  ASESOR
  GERENTE
  ADMINISTRATIVA
  OTRO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_gasto_enum {
  TRANSPORTE
  PARQUEADERO
  PEAJE
  ALIMENTACION
  CONSUMIBLE
  HERRAMIENTA
  OTRO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_identificacion_enum {
  CC
  NIT
  CE
  PA
  TI
  RC
  DNI
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_item_remision_enum {
  COMPONENTE
  HERRAMIENTA
}

enum tipo_lectura_horometro_enum {
  MANTENIMIENTO
  MANUAL
  AUTOMATICA
  INICIAL
}

enum tipo_motor_enum {
  COMBUSTION
  ELECTRICO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_movimiento_inventario_enum {
  ENTRADA
  SALIDA
  AJUSTE
  TRANSFERENCIA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_persona_enum {
  NATURAL
  JURIDICA
}

enum tipo_proveedor_enum {
  NACIONAL
  INTERNACIONAL
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_recepcion_compra_enum {
  PARCIAL
  FINAL
  UNICA
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum tipo_remision_enum {
  VALE_SALIDA_TECNICO
  VENTA_CLIENTE
  PRESTAMO_HERRAMIENTA
  GARANTIA
}

enum tipo_sangre_enum {
  O_POSITIVO  @map("O+")
  O_NEGATIVO  @map("O-")
  A_POSITIVO  @map("A+")
  A_NEGATIVO  @map("A-")
  B_POSITIVO  @map("B+")
  B_NEGATIVO  @map("B-")
  AB_POSITIVO @map("AB+")
  AB_NEGATIVO @map("AB-")
  NO_CONOCIDO
}

/// This enum is commented in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
enum zona_geografica_enum {
  NORTE
  SUR
  CENTRO
  ORIENTE
  OCCIDENTE
  METROPOLITANA
  OTRA
}
